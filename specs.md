# SRE 平台前端開發規格書 (SSOT)

**版本**: 1.0
**最後更新**: 2025-09-08

---

## **目錄**

- [1. 總覽 (Overview)](#1-總覽-overview)
- [2. 全局開發原則 (Global Principles)](#2-全局開發原則-global-principles)
- [3. 全局佈局與導航 (Global Layout & Navigation)](#3-全局佈局與導航-global-layout--navigation)
- [4. 登入與登出 (Authentication)](#4-登入與登出-authentication)
- [5. 儀表板頁面 (Dashboard Page)](#5-儀表板頁面-dashboard-page)
- [6. 資源管理 (Resource Management)](#6-資源管理-resource-management)
- [7. 組織管理 (Organization Management)](#7-組織管理-organization-management)
- [8. 告警規則 (Alert Rules)](#8-告警規則-alert-rules)
- [9. 自動化 (Automation)](#9-自動化-automation)
- [10. 容量規劃 (Capacity Planning)](#10-容量規劃-capacity-planning)
- [11. 告警紀錄 (Incidents)](#11-告警紀錄-incidents)
- [12. 個人資料與設定 (Profile & Settings)](#12-個人資料與設定-profile--settings)
- [13. 系統設定 (System Settings)](#13-系統設定-system-settings)
- [14. 平台維運 (Platform Operations)](#14-平台維運-platform-operations)
- [15. 非功能性需求 (Non-Functional Requirements)](#15-非功能性需求-non-functional-requirements)

---

## **1. 總覽 (Overview)**

本文件為 SRE 平台前端專案的**唯一、權威的開發規格來源 (Single Source of Truth)**。其目標是定義一個清晰、完整且可執行的開發藍圖，足以讓任何一位工程師能夠獨立、準確地完成整個專案的實作。

### **1.1. 技術選型 (Technology Stack)**

| 類別 | 技術選型 |
| :--- | :--- |
| **核心框架** | `React` |
| **UI 元件庫** | `Ant Design (AntD)` |
| **狀態管理** | `Redux Toolkit (RTK)` |
| **資料視覺化** | `ECharts for React` |
| **前端路由** | `React Router` |
| **開發與建構** | `Vite` |

## **2. 全局開發原則 (Global Principles)**

- **目錄結構**:
    - `src/components`: 存放可在多個頁面間複用的展示型元件。
    - `src/features`: 存放與特定功能模組相關的所有檔案 (e.g., `features/Dashboard`)。
    - `src/services`: 存放自動生成的 API 客戶端 (RTK Query)。
    - `src/store`: 存放 Redux store。
    - `src/layouts`: 存放應用程式的主體佈局元件。
    - `src/pages`: 存放頁面級元件，負責組合 layout 和 features。
- **元件設計**: 遵循「容器(Container)與展示(Presentational)元件」分離的模式。
- **狀態管理**:
    - **Redux (RTK)**: 用於管理全域狀態、伺服器快取 (RTK Query)。
    - **本地狀態 (useState/useReducer)**: 用於管理單一元件內部 UI 狀態（如表單輸入、Modal 開關）。

## **3. 全局佈局與導航 (Global Layout & Navigation)**

### **3.1. 功能目標**
建立一個一致性的應用框架，包含頂部導航、側邊菜單和主內容區，為所有功能頁面提供統一的導航體驗。

### **3.2. 功能規格**
- **頂部 Header**:
    - **左側**: SRE 平台 Logo 和應用名稱。
    - **右側**:
        - **全局搜索框**: 支援 `Ctrl+K` 快捷鍵，能夠跨越多種資源類型進行搜尋。
        - **通知中心**: 鈴鐺圖標，圖標上的紅點 (`Badge`) 應顯示未讀通知數量。點擊後彈出通知列表。
        - **用戶菜單**: 包含「個人設置」、「登出」等選項。
- **側邊導航 (Sidebar)**:
    - **可收合**: 提供按鈕進行側邊導航的收縮和展開。
    - **菜單項**: 儀表板、資源管理、組織管理、告警規則、自動化、容量規劃、告警紀錄、通知管道、系統設定。

#### **3.3. 視覺設計**

* **核心風格**: 整體採用 Ant Design 的經典專業後台佈局，確保資訊架構的清晰與操作的一致性。  
* **參考圖片**:  
  * **[通知中心]**: 此圖展示了點擊頂部 Header 右側鈴鐺圖標後彈出的 Popover。Popover 內部分為頂部的標題「通知中心」和下方的滾動列表。每條通知包含一個代表狀態的圖標、通知標題和時間戳。未讀通知會有藍點提示，整體風格緊湊且資訊清晰。

### **3.4. 開發規格**
- **核心元件**: `MainLayout.tsx`, `Header.tsx`, `Sidebar.tsx`
- **API 端點**:
    - `GET /api/v1/search`: 用於全局搜索框。
    - `GET /api/v1/notifications/summary`: 用於獲取未讀通知數。
    - `GET /api/v1/notifications`: 用於獲取通知列表。
- **驗收條件**:
    - [ ] 頁面佈局在各種螢幕尺寸下保持穩定。
    - [ ] 側邊欄菜單能正確導航至對應頁面，並高亮顯示當前頁面。
    - [ ] 通知中心的未讀數量能正確顯示。

## **4. 登入與登出 (Authentication)**

### **4.1. 登入頁面 (Login Page)**

#### **4.1.1. 功能目標**
作為系統入口，提供統一的身份驗證界面。

#### **4.1.2. 功能規格**
* **用戶輸入**: 用戶名/郵箱輸入框、密碼輸入框  
* **操作按鈕**: 登入按鈕  
* **其他功能**: 忘記密碼連結、註冊帳號連結（如適用）  
* **安全性**: 密碼輸入框應隱藏輸入內容，支持回車鍵提交

#### **4.1.3. 視覺設計**
* **核心風格**: 提供一個置中的登入表單，背景通常為簡潔的深色或帶有科技感的漸層，旨在營造專業且安全的氛圍。  
* **參考圖片**:  
  * **[登入頁面]**: 畫面中央是一個清晰的白色表單框，包含 SRE 平台 Logo、標題「登入您的帳號」、用戶名/郵箱輸入框、密碼輸入框，以及一個藍色的「登入」主操作按鈕。表單下方提供「忘記密碼」等次要連結。整體佈局對稱且焦點集中，引導使用者快速完成登入操作。

#### **4.1.4. 開發規格**
* **核心元件**: LoginPage, LoginForm  
* **API 端點**: POST /api/v1/auth/login  
* **狀態管理**: 登入表單狀態為本地狀態，登入成功後跳轉至儀表板頁面。  
* **驗收條件**:  
  * [ ] 正確顯示登入表單  
  * [ ] 輸入驗證（用戶名和密碼必填）  
  * [ ] 正確呼叫登入 API  
  * [ ] 登入成功後跳轉至儀表板  
  * [ ] 登入失敗時顯示錯誤訊息

### **4.2. 登出功能 (Logout Functionality)**

#### **4.2.1. 功能目標**
提供安全的用戶登出機制，清除用戶會話並返回登入頁面。

#### **4.2.2. 功能規格**
* **登出觸發**: 通過點擊頂部導航欄中的用戶菜單並選擇「登出」選項來觸發登出操作  
* **確認機制**: 點擊登出後，顯示確認對話框以防止誤操作  
* **會話清除**: 清除用戶的認證令牌和本地存儲的用戶相關數據  
* **頁面跳轉**: 登出成功後自動跳轉到登入頁面  
* **安全性**: 確保登出後無法通過瀏覽器的返回按鈕訪問受保護的頁面

#### **4.2.3. 視覺設計**
* 確保用戶能夠安全地結束當前會話。  
* **參考圖片**:
  * **[登出頁面]**: 畫面中央是一個清晰的白色表單框，包含 SRE 平台 Logo、標題「登出您的帳號」、確認登出按鈕。整體佈局對稱且焦點集中，引導使用者快速完成登出操作。
  
#### **4.2.4. 開發規格**
* **核心元件**: LogoutHandler, LogoutConfirmationModal  
* **API 端點**: POST /api/v1/auth/logout  
* **狀態管理**: 登出狀態為本地狀態，登出成功後清除 Redux store 中的所有用戶相關數據。  
* **驗收條件**:  
  * [ ] 點擊用戶菜單中的登出選項應顯示確認對話框  
  * [ ] 確認登出後應正確呼叫登出 API  
  * [ ] 登出成功後應清除所有用戶數據  
  * [ ] 登出成功後應跳轉到登入頁面  
  * [ ] 登出後無法通過瀏覽器返回按鈕訪問受保護頁面

## **5. 儀表板頁面 (Dashboard Page)**

### **5.1. 功能目標**
作為系統首頁，提供一個高層次的視圖，讓使用者能快速掌握系統的整體健康狀況與關鍵指標。

### **5.2. 功能規格**
儀表板以視覺化的圖表和卡片，彙整了系統當前最重要的狀態摘要。主要包含：

* **狀態趨勢卡片**: 顯示「新告警」、「處理中」、「今日已解決」的數量，並與昨日數據比較呈現趨勢。  
* **關鍵績效指標 (KPI)**: 包含「資源妥善率」、「總資源數」等核心指標。  
* **圖表區**: 「資源群組狀態總覽」長條圖與「資源狀態分佈」圓餅圖。  
* **增補功能**:  
  * 趨勢指標加入迷你圖 (Sparkline)。  
  * 允許使用者自訂卡片排列。

### **5.3. 視覺設計**
* **核心風格**: 
	* 強調**一覽性**和**關鍵資訊快速獲取**。  
	* 採用 Ant Design Grid 和 Card 形成卡片式佈局。  
	* 使用不同顏色區分卡片狀態，提升視覺衝擊力。   
* **參考圖片**:  
  * **[儀表板]**: 畫面由多個卡片組成。頂部是三張並排的 KPI 狀態趨勢卡片（例如：「新告警」、「處理中」、「今日已解決」），使用 Statistic 元件突顯核心數字，並附有與昨日比較的趨勢百分比。下方左側是「資源群組狀態總覽」的長條圖，右側是「資源狀態分佈」的圓餅圖，兩者都使用了 ECharts 進行數據可視化，色彩清晰，圖例明確。

### **5.4. 開發規格**
* **核心元件**: DashboardPage, SummaryCard, KpiCard, ResourceStatusChart, StatusDistributionChart  
* **API 端點**: GET /api/v1/dashboard/summary, GET /api/v1/dashboard/trends, GET /api/v1/dashboard/resource-distribution  
* **狀態管理**: 頁面載入和錯誤狀態由 RTK Query 管理，API 數據由 RTK Query 快取。  
* **驗收條件**:  
  * [ ] 正確呼叫所有 dashboard API。  
  * [ ] 正確渲染所有統計卡片和圖表。  
  * [ ] API 呼叫失敗時顯示錯誤提示。

## **6. 資源管理 (Resource Management)**

### **6.1. 功能目標**
提供對所有監控資源的集中管理、探索與高效的批次操作能力，並能快速追溯資源的相關告警與歷史指標。

### **6.2. 功能規格**
- **資源列表**:
    - 應提供基於狀態、類型、群組和關鍵字的篩選功能。
    - 支援複選框 (Checkbox) 進行多選。
    - 當勾選資源後，頁面頂部應動態出現「批次操作欄」，提供批次刪除、加入群組等操作。
- **資源詳情**:
    - 點擊任一資源應能進入其詳情頁面。
    - 詳情頁建議使用**頁籤 (`Tabs`)** 佈局，區分以下內容：
        - **基本資訊**: 展示資源的詳細屬性。
        - **歷史指標**: 繪製 CPU、記憶體等關鍵指標在過去一段時間的趨勢圖。
        - **關聯告警**: 展示與該資源相關的告警歷史列表。
- **資源探索**:
    - 提供「掃描網段」功能，非同步探索網路中的未知資源。

### **6.3. 視覺設計**
* **核心風格**: 強調列表的**高效篩選**與**批次操作**，是典型的數據驅動管理界面。  
* **參考圖片**:  
  * **[資源管理主頁]**: 頁面頂部是操作區，包含一個搜尋框、藍色的「新增資源」按鈕和「掃描網路」按鈕。下方是 Ant Design Table，展示了資源列表。表格的欄位包含資源名稱、IP、狀態（使用不同顏色的 Tag 標示）等。每行末尾都有「編輯」、「刪除」等文字按鈕連結。  
  * **[資源批次操作]**: 此圖展示了當使用者在表格中勾選了多個項目後的介面變化。表格頂部會**動態浮現**一個操作列，明確顯示「已選 X 項」，並提供「批次刪除」、「批次加入群組」等 Button。這個互動設計極大地提升了批次管理的效率。

### **6.4. 開發規格**
- **核心元件**: `ResourcesPage.tsx`, `ResourceTable.tsx`, `ResourceDetailPage.tsx`, `MetricsChart.tsx`, `AssociatedIncidentsTable.tsx`, `ScanNetworkModal.tsx`
- **API 端點**:
    - `GET /api/v1/resources`: 獲取資源列表。
    - `GET /api/v1/resources/{resourceId}`: 獲取資源詳情。
    - `GET /api/v1/resources/{resourceId}/metrics`: 獲取歷史指標數據，用於繪製圖表。
    - `GET /api/v1/incidents?resource_id={resourceId}`: 獲取關聯告警列表。
    - 其他資源管理的 CRUD 和掃描 API。
- **驗收條件**:
    - [ ] 資源列表能正確篩選和分頁。
    - [ ] 批次操作功能運作正常。
    - [ ] 資源詳情頁的三個頁籤（基本資訊、歷史指標、關聯告警）都能正確載入並顯示數據。

## **7. 組織管理 (Organization Management)**

### **7.1. 功能目標**
提供對使用者 (Personnel) 和團隊 (Teams) 的管理功能，並確保在大規模使用者環境下的操作流暢性。

### **7.2. 功能規格**
- **頁面佈局**: 使用**頁籤 (`Tabs`)** 區分「人員管理」和「團隊管理」。
- **人員管理**:
    - 提供對使用者的 CRUD 操作。
    - 在設定角色時，應提供提示圖示，懸浮後顯示的角色說明需由後端 API 提供。
- **團隊管理**:
    - 提供對團隊的 CRUD 操作。
    - 在編輯團隊並選擇成員或通知訂閱者時，應使用**搜尋自動完成**的方式，而非一次性載入所有使用者列表。

### **7.3. 視覺設計**
* **核心風格**: 採用頁籤 (Tabs) 佈局，將不同但相關的管理功能（人員與團隊）清晰地組織在同一頁面內，提供一致的管理體驗。  
* **參考圖片**:  
  * **[人員管理頁面]**: 畫面頂部是「人員管理」和「團隊管理」的頁籤，當前選中的是「人員管理」。頁籤下方是操作區，包含搜尋框和藍色的「新增人員」按鈕。主體部分是一個 Ant Design Table，列出了用戶 ID、姓名、郵箱、角色（使用不同顏色的 Tag 標示）、所屬團隊等資訊。  
  * **[新增/編輯人員彈窗]**: 點擊「新增人員」後，會彈出一個 Modal。Modal 內部是一個 Form，包含了姓名、郵箱、密碼、角色（多選 Select）和所屬團隊（多選 Select）等輸入項。表單佈局簡潔，標籤與輸入框對齊，底部有「取消」和「確定」按鈕。  
  * **[編輯團隊彈窗]**: 在「團隊管理」頁籤中，編輯團隊時會彈出 Modal。此 Modal 的核心是其成員選擇器，使用了 Transfer (穿梭框) 元件。左側框列出了所有可選的人員，右側框列出了已選入該團隊的成員，使用者可以方便地在兩者之間進行勾選和移動，互動非常直觀。

### **7.4. 開發規格**
- **核心元件**: `OrganizationPage.tsx`, `PersonnelTable.tsx`, `TeamTable.tsx`, `TeamFormModal.tsx`
- **API 端點**:
    - `GET/POST/PUT/DELETE /api/v1/users`: 管理使用者。
    - `GET/POST/PUT/DELETE /api/v1/teams`: 管理團隊。
    - `GET /api/v1/roles`: 動態獲取角色定義。
    - `GET /api/v1/autocomplete?type=user&q={keyword}`: 用於團隊成員選擇時的搜尋建議。
- **驗收條件**:
    - [ ] 能對人員和團隊進行完整的 CRUD 操作。
    - [ ] 角色說明是動態載入的。
    - [ ] 編輯團隊時，新增成員的體驗是流暢的搜尋和選擇，而非等待長列表載入。

## **8. 告警規則 (Alert Rules)**

### **8.1. 功能目標**
提供一個強大且靈活的界面，讓使用者可以定義告警觸發條件，並關聯通知管道和自動化腳本。

### **8.2. 功能規格**
- **表單設計**:
    - 在「新增/編輯告警規則」的表單中，「監控指標」的下拉選單選項應從後端動態載入。
    - 表單中應包含一個「自動化響應」區塊，允許使用者：
        1.  選擇一個已存在的自動化腳本。
        2.  將告警事件的變數（如資源 IP、觸發值）映射到腳本所需的參數上。
- **生命週期管理**: 提供對告警規則的啟用、停用和測試功能。

### **8.3. 視覺設計**
* **核心風格**: 強調規則邏輯的清晰配置和可擴展性，特別是在處理複雜表單時，採用了分組和動態渲染的設計。  
* **參考圖片**:  
  * **[新增/編輯規則彈窗]**: 這是此功能的核心視覺。一個寬大的 Modal 內部，使用 Collapse (摺疊面板) 將複雜的表單分成了「基本信息」、「觸發條件」、「告警內容與通知」和「自動化響應」等幾個可獨立展開/收合的區塊。  
  * 在「觸發條件」區塊內，使用了 Form.List，允許使用者動態新增或刪除多組「AND/OR」條件，每組條件內部又可以新增多個具體的監控指標判斷，提供了極高的靈活性。  
  * 在「自動化響應」區塊，當使用者從下拉選單中選擇一個腳本後，下方會**動態生成**該腳本所需的參數輸入框，實現了高度互動的配置體驗。

### **8.4. 開發規格**
- **核心元件**: `AlertRulesPage.tsx`, `RuleFormModal.tsx`
- **API 端點**:
    - `GET/POST/PUT/DELETE /api/v1/alert-rules`: 管理告警規則。
    - `GET /api/v1/metrics/definitions`: 用於動態填充「監控指標」下拉選單。
    - `GET /api/v1/automation/scripts`: 用於獲取可關聯的腳本列表。
- **驗收條件**:
    - [ ] 「監控指標」下拉選單的內容是透過 API 動態載入的。
    - [ ] 能夠成功建立一條關聯了自動化腳本的告警規則。
    - [ ] 規則的啟用/停用功能正常。

## **9. 自動化 (Automation)**

### **9.1. 功能目標**
建立一個集腳本開發、排程管理和執行追蹤於一體的自動化中心。

### **9.2. 功能規格**
- **頁面佈局**: 使用**頁籤 (`Tabs`)** 區分「腳本庫」、「排程管理」和「執行日誌」。
- **腳本庫**:
    - 提供對腳本的 CRUD 操作。
    - 列表中的每一項腳本都應有「運行」按鈕，允許使用者手動觸發以進行測試。
- **排程管理**:
    - 提供對定時執行任務的完整 CRUD 操作。
- **執行日誌**:
    - 列表應清晰展示每次執行的狀態（成功/失敗）、觸發方式（手動/告警）、執行時間等。
    - 如果是由告警觸發的，應提供一個可點擊的連結，直接跳轉到該告警事件的詳情頁。

### **9.3. 視覺設計**
* **核心風格**: 為技術操作人員（如 SRE）設計的專業界面，特別是將專業的代碼編輯器無縫整合進管理流程中。  
* **參考圖片**:  
  * **[腳本庫頁面]**: 頁面佈局與其他管理頁面類似，採用頂部 Tabs 區分「腳本庫」和「執行日誌」。表格列出了腳本的名稱、類型、描述、創建者等，操作列包含「編輯」、「運行」、「刪除」按鈕。  
  * **[腳本編輯器彈窗]**: 點擊「新增腳本」或「編輯」後，彈出的 Modal 內部嵌入了 **Monaco Editor** 專業代碼編輯器組件。編輯器區域佔據了 Modal 的大部分空間，支持語法高亮、行號和代碼自動補全，提供了流暢的腳本編寫體驗。編輯器上方是腳本名稱、描述等元數據的輸入表單。  
  * **[執行日誌詳情]**: 點擊「執行日誌」表格中的「查看日誌」操作，會彈出一個 Modal。Modal 內部是一個不可編輯的、顯示著黑底白字執行輸出的日誌查看器，支持滾動和一鍵複製，風格類似於終端 (Terminal)，符合開發者的使用習慣。

### **9.4. 開發規格**
- **核心元件**: `AutomationPage.tsx`, `ScriptsTable.tsx`, `SchedulesTable.tsx`, `ExecutionsTable.tsx`
- **API 端點**:
    - `GET/POST/PUT/DELETE /api/v1/automation/scripts`: 管理腳本。
    - `POST /api/v1/automation/scripts/{scriptId}/run`: 手動執行腳本。
    - `GET/POST/PUT/DELETE /api/v1/automation/schedules`: 管理排程。
    - `GET /api/v1/automation/executions`: 檢視日誌。
- **驗收條件**:
    - [ ] 能在「腳本庫」頁籤中手動執行一個腳本並在「執行日誌」中看到結果。
    - [ ] 能在「排程管理」頁籤中成功建立並管理一個定時任務。
    - [ ] 能從一條由告警觸發的執行紀錄，成功跳轉到對應的告警詳情。

## **10. 容量規劃頁面 (Capacity Planning Page)**

### **10.1. 功能目標**
分析歷史數據，預測未來資源消耗趨勢，從被動告警轉向主動規劃。

### **10.2. 功能規格**
* **輸入**: 選擇「資源群組」和關鍵效能指標。  
* **輸出**:  
  * **關鍵預測指標**: 以卡片形式呈現，如「預計將在 45 天後達到 80% 警戒線」。  
  * **趨勢圖**: 包含歷史數據與未來預測的趨勢線。  
  * **建議措施**: 系統提出的建議，並可觸發對應的自動化腳本。

### **10.3. 視覺設計**
* **核心風格**: 這是一個數據分析與預測導向的頁面，設計上強調**輸入的簡潔性**與**輸出的可視化**，幫助使用者從歷史數據中洞察未來趨勢。  
* **參考圖片**:  
  * **[容量規劃初始頁面]**: 畫面佈局清晰，頂部是一個配置表單 (Form)，包含兩個核心的下拉選單：「選擇資源群組」和「選擇關鍵效能指標」，旁邊是一個藍色的「開始分析」按鈕。初始狀態下，主內容區會提示使用者進行選擇以開始分析。  
  * **[容量規劃結果頁面]**: 點擊分析後，頁面會動態呈現結果。頂部會出現幾張並排的 Card，用 Statistic 元件醒目地展示關鍵預測指標，例如：「預計將在 **45 天後** 達到 80% 警戒線」。  
  * 下方的主圖表是一個 ECharts 折線圖，圖中用**兩種不同顏色或線型**（例如實線代表歷史，虛線代表預測）清晰地繪製了**歷史數據趨勢**與**未來預測趨勢**，並可能包含一條代表「警戒線」的水平標示線，視覺衝擊力強，結果一目了然。

### **10.4. 開發規格**
* **核心元件**: CapacityPlanningPage.tsx, CapacityAnalysisForm.tsx, CapacityForecastChart.tsx  
* **API 端點**: POST /api/v1/diagnostics/capacity-analysis  
* **狀態管理**: 表單狀態為本地狀態，分析結果由 RTK Query 管理。  
* **驗收條件**:  
  * [ ] 選擇群組和指標後能正確呼叫 API。  
  * [ ] 能正確顯示預測指標卡片和趨勢圖。  
  * [ ] 圖表 Y 軸和 Tooltip 顯示正確單位。  
  * [ ] 建議措施旁的按鈕可被點擊並觸發流程。

## **11. 告警紀錄 (Incidents)**

### **11.1. 功能目標**
提供一個高效的告警處理中心，支援快速篩選、批次處理、關聯分析和自動化追蹤。

### **11.2. 功能規格**
- **列表與篩選**: 提供基於時間、等級、狀態和**資源**的進階篩選功能。
- **批次處理**: 使用者在勾選多筆告警後，可執行「批次確認」和「批次解決」操作。
- **事件詳情**:
    - 彈出視窗中應包含一個「關聯事件」頁籤，用於展示與當前事件相關的其他告警。
    - 如果此事件觸發了自動化腳本，應在詳情中清晰展示**自動化執行紀錄的 ID**，並提供連結跳轉至該紀錄的詳情。

### **11.3. 視覺設計**
* **核心風格**: 為高壓力的告警處理場景設計，強調**資訊的快速過濾**與**上下文的清晰呈現**。  
* **參考圖片**:  
  * **[告警紀錄主頁]**: 頁面頂部是一個功能強大的篩選區，包含時間範圍選擇器 (DatePicker.RangePicker)、告警等級 (Select) 和處理狀態 (Select) 等多個篩選條件。下方是告警列表 Table，其中「告警等級」和「處理狀態」欄位使用了**不同顏色的 Tag** (例如：Critical 為紅色，Resolved 為綠色) 來高亮顯示，讓維運人員能迅速定位重要告警。  
  * **[事件詳情彈窗]**: 點擊單筆紀錄後，彈出的 Modal 內部採用了 Tabs 佈局。  
    * **「詳情」頁籤**：展示告警的所有元數據。  
    * **「處理歷史」頁籤**：顯示確認、解決、指派等操作的歷史紀錄。  
    * **「關聯事件」頁籤**：顯示透過 API 獲取的、與此告警相關的其他告警列表。  
    * 「自動化」頁籤：如果此告警觸發了自動化腳本，這裡會顯示一個或多個可點擊的執行紀錄 ID。  
      這種分頁設計使得大量資訊被清晰地組織起來，避免了介面混亂。  
  * **[AI 輔助報告]**: 當使用者勾選多筆事件並點擊「生成事件報告」後，會彈出一個專門的 Modal。Modal 內以結構化的格式（如標題、摘要、可能原因、建議方案）清晰地展示 AI 生成的報告內容，並提供一鍵複製功能。


### **11.4. 開發規格**
- **核心元件**: `IncidentsPage.tsx`, `IncidentsTable.tsx`, `IncidentDetailModal.tsx`
- **API 端點**:
    - `GET /api/v1/incidents`: 獲取告警列表（支援 `resource_id` 篩選）。
    - `POST /api/v1/incidents/batch`: 執行批次處理。
    - `GET /api/v1/incidents/{incidentId}/correlated`: 獲取關聯告警。
    - 其他告警管理的 CRUD API。
- **驗收條件**:
    - [ ] 能夠成功對多個告警進行批次確認。
    - [ ] 在告警詳情中，能成功載入並顯示「關聯事件」列表。
    - [ ] 在告警詳情中，能清晰看到其觸發的「自動化執行紀錄」連結。

## **12. 個人資料與設定 (Profile & Settings)**

### **12.1. 功能目標**
提供使用者個人化設定和管理員系統級設定的統一入口。

### **12.2. 功能規格**
- **頁面佈局**: 使用**頁籤 (`Tabs`)** 佈局，區分「個人資料」和「系統設定」（僅管理員可見）。
- **個人資料**:
    - 包含基本資訊修改、密碼變更、通知偏好設定。
- **系統設定**:
    - 包含對**維護時段**的完整 CRUD 管理功能。

### **12.3. 視覺設計**
* **核心風格**: 這是一個純粹的表單驅動的管理界面，設計上注重**分區的邏輯性**和**操作的回饋感**。  
* **參考圖片**:  
  * **[頁面佈局]**: 整個頁面使用頂層的 Tabs 將「個人資料」和「系統設定」完全分開。  
  * **[個人資料頁籤]**: 內部再次使用 Tabs 將「個人資訊」、「密碼安全」和「通知設定」三個部分清晰地劃分開來。  
    * 在「通知設定」頁籤中，每個聯絡方式（Email, SMS）後面都有一個狀態指示器（例如「已驗證」的綠色標籤）和獨立的操作按鈕（「傳送驗證」、「測試」），介面清晰地傳達了每個聯絡渠道的狀態和可用操作。  
  * **[系統設定頁籤]**: (僅管理員可見) 同樣使用內部 Tabs 劃分不同的系統級設定，例如「整合設定」（用於配置 Grafana 等）和「維護時段管理」。  
    * 「維護時段管理」的介面是一個標準的 CRUD 表格，包含列表、新增、編輯和刪除按鈕，與平台其他管理頁面的風格保持一致。


### **12.4. 開發規格**
- **核心元件**: `SettingsPage.tsx`, `ProfileForm.tsx`, `MaintenanceWindowsTable.tsx`
- **API 端點**:
    - `GET/PUT /api/v1/users/profile`: 管理個人資料。
    - `GET/POST/PUT/DELETE /api/v1/settings/maintenance-windows`: 管理維護時段。
- **驗收條件**:
    - [ ] 普通使用者只能看到「個人資料」頁籤。
    - [ ] 管理員能看到並成功管理「系統設定」中的維護時段。

## **13. 系統設定 (System Settings)**

### **13.1. 維護時段管理 (Maintenance Window Management)**

#### **功能目標**
提供對全域維護時段的集中管理，確保在計畫性維護期間能自動抑制告警。

### **13.2. 功能規格**
*   **列表與管理**: 提供對已設定維護時段的列表、新增、編輯和刪除功能。此功能解決了 **G-09** 缺口，提供了完整的生命週期管理。
*   **關聯資源**: 在設定時，可以指定此維護時段影響的資源群組或特定資源。

### **13.3. 視覺設計**

* **核心風格**: 這是一個標準的 CRUD (建立、讀取、更新、刪除) 管理界面，設計上強調**資訊的結構化呈現**和**表單設定的直觀性**。整體風格會與「資源管理」、「組織管理」等頁面保持高度一致，以降低管理員的學習成本。  
* **參考圖片**: (此頁面可參考**資源管理**或**人員管理**的佈局，因為它們都是標準的表格管理界面)  
  * **[資源管理主頁]**  
* **視覺設計描述**:  
  * **頁面佈局**:  
    * 此功能會作為「系統設定」頁面下的一個**頁籤 (Tab)**。  
    * 頁籤內容頂部是操作區，包含一個**搜尋框**（用於快速查找特定維護時段）和一個藍色的**「新增維護時段」按鈕**。  
    * 下方主體部分是一個 Ant Design Table，用於展示所有已設定的維護時段列表。  
  * **表格 (Table) 設計**:  
    * **表格欄位**會清晰地列出維護時段的關鍵資訊，例如：「名稱」、「描述」、「開始時間」、「結束時間」、「是否重複 (Recurring)」以及「影響的資源/群組」。  
    * 「是否重複」欄位可以使用 Tag 或 Switch 元件來直觀顯示狀態。  
    * 每行末尾都會有「編輯」和「刪除」的文字按鈕，用於管理單個項目。  
  * **新增/編輯彈窗 (Modal) 設計**:  
    * 點擊「新增」或「編輯」按鈕後，會彈出一個 Modal，內部是一個結構清晰的 Form。  
    * **表單欄位**會包含：  
      * **名稱/描述**: 標準的文字輸入框 (Input, Input.TextArea)。  
      * **時間範圍**: 使用 DatePicker.RangePicker 元件，讓使用者可以方便地選擇開始和結束的日期與時間。  
      * **重複規則**: 可能是一個 Checkbox ("是否重複")，勾選後會出現 Select 元件讓使用者選擇重複頻率（每日、每週、每月）。  
      * **關聯資源**: 這是一個關鍵的互動設計。可能會使用 Transfer (穿梭框) 或支持搜尋自動完成的多選 Select 元件 (Select.Multiple)，讓管理員可以從所有資源或資源群組中，精確地選擇此維護時段要影響的對象。


### **13.4. 開發規格**
*   **API 端點**: `GET/POST/PUT/DELETE /api/v1/settings/maintenance-windows`
*   **核心元件**: MaintenanceWindowsPage.tsx, MaintenanceWindowsTable.tsx, MaintenanceWindowFormModal.tsx

## **14. 平台維運 (Platform Operations)**

### **14.1. 平台狀態診斷 (Platform Diagnostics)**

### **14.1. 功能目標**
提供平台管理員一個儀表板，用以了解系統自身的健康狀況，例如：「過去 24 小時內，哪個自動化腳本失敗率最高？」或「哪個通知管道最近一直發送失敗？」。

### **14.2. 視覺設計**
* **核心風格**: 這是一個純粹的數據和健康度監控儀表板，設計上應極度注重**資訊的清晰度**和**異常狀態的突顯**。整體風格會與主儀表板類似，但內容更聚焦於平台自身的內部指標。  
* **參考圖片**: (此頁面可參考**儀表板**的卡片式佈局，但內容替換為平台健康度指標)  
  * **[儀表板]**  
* **視覺設計描述**:  
  * **頁面佈局**: 整個頁面會採用與主儀表板類似的**卡片式 (Card) 網格佈局**。頁面標題為「平台狀態診斷」，並可能有一個時間範圍選擇器（例如「過去 24 小時 / 7 天」）來調整數據的可視範圍。  
  * **自動化健康度 (Automation Health) 卡片**:  
    * 這會是一個核心的卡片，標題為「自動化腳本健康度」。  
    * 內部是一個 Ant Design Table，列出從 GET /api/v1/admin/diagnostics API 中獲取的腳本健康度數據。  
    * **表格欄位**可能包含：「腳本名稱」、「總執行次數」、「失敗次數」和「失敗率」。  
    * **視覺增強**: 「失敗率」這一欄會是視覺焦點。  
      * 失敗率為 0% 的腳本可以顯示綠色的 Tag。  
      * 失敗率高於某個閾值（例如 5%）的腳本，其整行背景可能會被標示為淡紅色，或者在失敗率旁邊顯示一個紅色的警告圖標，以**強力突顯異常**，讓管理員能第一時間注意到有問題的腳本。  
  * **通知管道健康度 (Notification Health) 卡片**:  
    * 另一個關鍵卡片，標題為「通知管道健康度」。  
    * 內部同樣是一個 Table，展示 notification_health 的數據。  
    * **表格欄位**包含：「管道名稱」、「已發送數量」、「失敗數量」和「失敗率」。  
    * **視覺增強**: 同樣地，對於失敗數量或失敗率較高的通知管道，會使用**顏色或圖標**來進行視覺警示，確保管理員能快速識別出可能影響告警通知的系統瓶頸。

### **14.3. 開發規格**
*   **API 端點**: `GET /api/v1/admin/diagnostics`
*   **核心元件**: PlatformDiagnosticsPage.tsx, HealthDashboard.tsx

## **15. 非功能性需求 (Non-Functional Requirements)**

### **15.1. 國際化 (Internationalization - i18n)**

* **目標**: 支援多語言，初期支援**繁體中文 (zh-TW)** 和**英文 (en)**。  
* **體現之處**: 語言切換器。  
* **視覺描述**: 它的視覺設計已經包含在「**全局佈局**」的頂部 Header 中了。它通常是一個「地球」或「語言」圖標的 Dropdown 按鈕。點擊後，會彈出一個菜單，列出可選的語言（如「繁體中文」、「English」），使用者點擊後，整個介面的文字會即時切換。
* **實作要求**:  
  * [ ] 建立語言資源檔結構 (src/locales/zh-TW.json, src/locales/en.json)。  
  * [ ] 所有 UI 靜態文字都必須使用 i18n key。  
  * [ ] 提供語言切換器。

### **15.2. 無障礙訪問 (Accessibility - A11y)**

* **目標**: 確保應用程式可被輔助技術操作。
* **體現之處**: 焦點指示器 (Focus Indicator) 和 清晰的標籤。  
* **視覺描述**: 這不是一個頁面，而是一種**全局互動樣式**。當使用者使用鍵盤 Tab 鍵在頁面上導航時，所有可互動的元件（按鈕、連結、輸入框）周圍都會出現一個清晰的輪廓框（通常是藍色或白色的光暈），明確地告訴使用者當前的焦點在哪裡。這是確保鍵盤導航可用的核心視覺元素。  
* **實作要求**:  
  * [ ] **鍵盤導航**: 所有互動元件都必須可以透過 Tab 鍵聚焦。  
  * [ ] **ARIA 標籤**: 為非語意化元件提供正確的 ARIA 角色和屬性。  
  * [ ] **快捷鍵**: 為常用操作提供快捷鍵 (如 Ctrl+K 搜尋)。

### **15.3. 效能 (Performance)**

* **目標**: 提供快速、流暢的使用者體驗。
* **體現之處**: 載入狀態指示器 (Loading Indicators)。  
* **視覺描述**: 這也不是一個頁面，而是**元件的各種「載入中」狀態**。  
  * **頁面級載入**: 當載入整個頁面數據時，會在內容區中央顯示一個 Ant Design Spin (旋轉的圓圈)。  
  * **表格載入**: 當表格正在刷新數據時，整個表格內容會被一層半透明的遮罩覆蓋，中間有一個 Spin。  
  * **按鈕載入**: 當使用者點擊一個會觸發 API 請求的按鈕（如「儲存」、「登入」）時，按鈕會進入 loading 狀態，文字前會出現一個旋轉圖標，並且按鈕會被禁用，直到請求完成。  
* **實作要求**:  
  * [ ] **載入狀態**: 所有網路請求操作都必須有明確的 loading 狀態指示器。  
  * [ ] **表單草稿暫存**: 複雜表單應實作自動儲存草稿至 sessionStorage。  
  * [ ] **分頁**: 所有大量數據列表都必須實作後端分頁。

### **15.4. 響應式設計 (Responsive Web Design - RWD)**

* **目標**: 確保在行動裝置上有良好的瀏覽和操作體驗。  
* **體現之處**: **所有頁面在不同裝置上的佈局變化**。  
* **視覺描述**: 這不是一個新的設計，而是我們已經討論過的所有視覺設計的**一種適應性行為**。  
  * 例如，在桌面裝置上，「儀表板」的 KPI 卡片可能是四欄並排。  
  * 在平板裝置上，它們可能會自動變為兩欄。  
  * 在手機上，它們可能會變為單欄垂直排列，並且左側的 Sidebar 會自動收起，變為一個需要點擊才能展開的漢堡菜單。
* **實作要求**:  
  * [ ] 佈局應能自動適應螢幕寬度，避免水平滾動。  
  * [ ] 優化觸控目標的大小。