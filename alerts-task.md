# 「AI 分析」彈窗整合規劃：從「狀況通報」到「事件診斷」

### 1. 核心理念：區分兩種 AI 分析的職責

為了讓 AI 功能發揮最大價值，我們首先要明確「首頁」和「告警列表」中 AI 的不同定位。

| | **首頁 AI Insight** | **告警列表 AI 分析 (本次規劃重點)** |
| :--- | :--- | :--- |
| **分析情境** | 週期性、自動執行 (Proactive) | 即時性、由使用者觸發 (Reactive) |
| **分析目標** | **狀況通報**：總結過去趨勢，預警潛在風險 | **事件診斷**：分析特定告警群，推斷根本原因 |
| **產出範例** | "過去 24 小時 CPU 使用率有 15% 增長..." | "偵測到 5 則告警高度相關，根本原因為..." |

---

### 2. 「告警列表」的 AI 分析彈窗規劃

#### A. 觸發情境與分析範圍

* **觸發**：使用者在「告警列表」頁面點擊「AI 分析」按鈕。
* **分析範圍**：AI 分析的對象是**當前列表篩選出的所有告警**。例如，如果使用者篩選了「狀態=NEW」和「嚴重性=CRITICAL」的告警，AI 就會針對這些告警進行關聯分析。

#### B. 彈窗 UI/UX 設計

* **標題**：動態顯示分析範圍，例如：「**AI 事件診斷報告 (已分析 7 則告警)**」。
* **佈局**：採用多區塊、由總到分的資訊結構，引導使用者逐步深入。

---

### C. 核心內容規劃

#### 區塊一：事件風暴摘要 (Incident Storm Summary)
* **目的**：快速判斷告警的關聯性，評估是單點故障還是多重獨立事件。
* **內容**：
    * **AI 結論**：`AI 偵測到這 7 則告警高度相關，可能源於單一故障事件，已將其歸併為「核心交換器 CPU 過高事件」。`
    * **事件標籤**：`告警風暴` `網路問題` `核心服務`

#### 區塊二：根本原因推斷 (Root Cause Inference)
* **目的**：直指問題核心，給出最可能的根本原因。
* **內容**：
    * **根本原因**：`[高信心度] 根本原因很可能是 **核心交換器** 的 CPU 資源耗盡，導致其無法處理網路封包，進而引發下游服務的連線逾時。`
    * **關鍵指標**：`核心交換器 CPU 使用率在 14:32 達到 98%。` (指標應可點擊，跳轉到對應的 Metrics 圖表)

#### 區塊三：故障傳播路徑 (Failure Propagation Path)
* **目的**：以時間軸或流程圖的形式，還原事件的發生順序，展示故障是如何從根本原因擴散到其他服務的。
* **內容 (時間軸範例)**：
    * **14:32** - `[根本原因]` **核心交換器** CPU 過高
    * **14:35** - `[直接影響]` **db-prod-01** CPU high on db-prod-01 (因等待網路 I/O)
    * **14:38** - `[連鎖反應]` **staging-web-01** 記憶體使用率過高 (因連線堆積)
    * **14:40** - `[業務影響]` **api-gateway** API latency over 500ms

#### 區塊四：業務影響評估 (Business Impact Assessment)
* **目的**：將技術故障與業務影響關聯，幫助 SRE 判斷事件的優先級。
* **內容**：
    * **受影響的服務**：`使用者登入`、`訂單查詢`、`支付閘道`
    * **潛在的 SLA 風險**：`登入成功率可能已低於 99.5% 的目標`

#### 區塊五：建議行動方案 (Recommended Actions)
* **目的**：提供具體、可操作的後續步驟。
* **內容 (按優先級排序)**：
    1.  **[P1 立即執行]** 登入 **核心交換器** 並檢查 top processes，找出消耗 CPU 的具體程序。**(提供一鍵複製指令)**
    2.  **[P2 同步查閱]** 開啟「核心交換器故障標準處理流程」。**(點擊開啟 Runbook)**
    3.  **[P3 後續追蹤]** 建立一個技術債任務，評估核心交換器的容量升級或更換計畫。

---

### 4. 總結
這個設計讓「告警列表」的 AI 分析功能，成為一個強大的**即時決策支援系統**。它不僅能告訴 SRE 發生了什麼，更能清晰地解釋**因果關係、影響範圍、以及應對策略**，將原本需要數十分鐘甚至數小時的人工排查工作，壓縮在數秒之內，這正是 AI 運維的核心價值所在。