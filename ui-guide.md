# SRE 平台前端組件設計規範文件

## 1. 全域設計系統 (Global Design System)

本節定義了整個平台共享的核心設計元素，確保所有頁面和組件的視覺一致性。

### 1.1 核心品牌色 (Brand Colors)
- **Primary**: `#4A90FF` (主要按鈕、焦點、連結)
- **Success**: `#5FCF80` (成功狀態、健康指標)
- **Warning**: `#FFB84D` (警告、提醒)
- **Danger**: `#FF6B6B` (錯誤、危險操作)
- **Info**: `#B794F6` (資訊、特殊提示)

### 1.2 文字層級系統 (Typography)
- **Primary Text**: `rgba(255, 255, 255, 0.95)` (主要標題、重要文字)
- **Secondary Text**: `rgba(255, 255, 255, 0.85)` (次要內文、描述)
- **Tertiary Text**: `rgba(255, 255, 255, 0.65)` (輔助文字、提示)
- **Quaternary Text**: `rgba(255, 255, 255, 0.45)` (禁用文字、時間戳)

### 1.3 背景層級系統 (Backgrounds)
- **Page Background**: `#0A0B0E` (頁面最底層背景)
- **Container Background**: `#141519` (卡片、表格等主要容器背景)
- **Elevated Background**: `#1A1D23` (彈窗、下拉選單、表格頭部等浮動或高亮區域)
- **Overlay Background**: `#23262F` (覆蓋層、模態框背景)
- **Hover State**: `rgba(74, 144, 255, 0.08)` (滑鼠懸停效果)
- **Active State**: `rgba(74, 144, 255, 0.16)` (點擊或活動狀態)

### 1.4 邊框系統 (Borders)
- **Base Border**: `rgba(255, 255, 255, 0.12)` (標準邊框)
- **Light Border**: `rgba(255, 255, 255, 0.08)` (較淺或次要的邊框)
- **Focus Border**: `var(--brand-primary)` (焦點狀態邊框)

### 1.5 間距系統 (Spacing)
- **xs**: `4px`
- **sm**: `8px`
- **md**: `12px`
- **lg**: `16px`
- **xl**: `24px`
- **2xl**: `32px`

### 1.6 圓角系統 (Radius)
- **sm**: `6px`
- **md**: `8px`
- **lg**: `12px`
- **xl**: `16px`

### 1.7 陰影系統 (Shadows)
- **sm**: `0 2px 8px rgba(0, 0, 0, 0.24)`
- **md**: `0 4px 16px rgba(0, 0, 0, 0.32)`
- **lg**: `0 8px 32px rgba(0, 0, 0, 0.48)`

## 2. 通用組件樣式 (Component-Specific Styles)

### 2.1 頁面標題
- **主標題**: `.page-title`
  - 字體大小: 32px
  - 漸層文字效果
- **副標題**: `.page-subtitle`
  - 字體大小: 14px
  - 顏色: `var(--text-tertiary)`

### 2.2 表格 (`.table-wrapper`)
- **容器**: 背景 `var(--bg-container)`，圓角 `var(--radius-lg)`，帶有 `var(--shadow-sm)` 陰影。
- **工具列**: `.table-toolbar`，背景 `var(--bg-elevated)`。
- **表頭**: 背景 `var(--bg-elevated)`，文字大寫，顏色 `var(--text-secondary)`。
- **行**: 滑鼠懸停時背景變為 `var(--bg-hover)`。

### 2.3 狀態標籤 (`.status-badge`)
- 通用樣式：帶有動態脈衝效果的圓點。
- **Healthy**: `.status-healthy` (綠色)
- **Warning**: `.status-warning` (黃色)
- **Critical**: `.status-critical` (紅色)
- **New**: `.status-new` (藍色)
- **Acknowledged**: `.status-acknowledged` (黃色)
- **Resolved**: `.status-resolved` (綠色)

### 2.4 導航項目卡片 (`.nav-item`)
- 玻璃擬態效果 (`glassmorphism`)，使用 `backdrop-filter`。
- 懸停時有 `transform` 和 `box-shadow` 動畫。
- 包含圖標 (`.nav-item-icon`)、標題 (`.nav-item-title`) 和描述 (`.nav-item-description`)。
- **禁用狀態**: `.disabled`，套用灰度濾鏡。

### 2.5 彈窗/模態框 (Modal)
- **多步驟彈窗**: `.multi-step-modal`
  - 步驟指示器: `.steps-container`，包含 `.step-item` 和 `.step-indicator`。
  - 當前步驟: `.active` 狀態，有特殊背景和陰影。
  - 已完成步驟: `.completed` 狀態，顯示打勾圖標。
- **統一頁腳**: `.modal-footer-unified`
  - 按鈕樣式統一，包含預設按鈕和主按鈕。
- **滾動條**: 美化彈窗內容區域的滾動條。

## 3. 頁面詳解

### 3.1 登入頁面 (LoginPage)

#### 目的
提供使用者登入 SRE 平台的入口。頁面採用置中卡片式設計，並帶有動態背景裝飾。

#### 主要組件
- **登入卡片 (`.login-card`)**:
  - 圓角: `var(--radius-xl)`
  - 陰影: `box-shadow`
  - 效果: `backdrop-filter` 玻璃擬態效果。
- **平台標題**:
  - 圖標: `DeploymentUnitOutlined`
  - 主標題: "SRE Platform"
  - 副標題: "智慧化系統可靠性管理平台"
- **登入表單**:
  - 包含「帳號」與「密碼」輸入框，帶有 `UserOutlined` 和 `LockOutlined` 圖標。
  - 輸入框樣式在 `prototype.html` 中有針對性的美化 (e.g., `.login-page .ant-input`)。
  - 包含「記住我」複選框與「忘記密碼」連結。
- **登入按鈕 (`.login-submit-button`)**:
  - 主操作按鈕，引導用戶提交表單。
  - 高度: 52px，字體大小: 16px，圓角: `var(--radius-lg)`。
  - 懸停效果: `transform: translateY(-2px)`。

## 4. 儀表板頁面 (DashboardPage)

#### 目的
提供平台核心指標的戰情總覽，包含告警狀態、資源健康度、關鍵業務監控與資源使用率 Top N 列表。

#### 主要組件
- **告警狀態卡片 (`.stat-card`)**:
  - 顯示「待處理告警」、「處理中」、「今日已解決」等關鍵數據。
  - 佈局: `.card-content`，包含標題、數值、描述和圖標。
  - 使用 `.card-title`, `.card-value`, `.card-description` 樣式。
- **資源健康度圖表 (`.chart-card`)**:
  - **資源狀態分佈**: 環圈圖，顯示健康、警告、嚴重的資源數量與妥善率。
  - **資源群組狀態總覽**: 堆疊長條圖，顯示各資源群組的健康狀態分佈。
- **Top N 資源使用列表**:
  - **工具列**:
    - 包含「搜尋主機」、「篩選」、「AI 分析」按鈕。
    - 資源類型切換器 (`Radio.Group`)，用於在 CPU、記憶體、磁碟、網路之間切換。
  - **表格 (`.topn-table`)**:
    - 顯示主機名稱、使用趨勢 (迷你圖)、使用率 (進度條) 和數值。
    - 趨勢圖使用 ECharts 繪製，具有狀態背景色。

## 5. 資源管理 (Resources)

### 5.1 資源管理主頁 (ResourcesPage)

#### 目的
作為資源管理功能的入口頁面，提供到各個子功能的導航。

#### 主要組件
- **導航卡片 (`.nav-item`)**:
  - 每個卡片對應一個資源管理子功能，如「資源列表」、「資源群組」。
  - 卡片包含圖標、標題、描述和功能標籤。
  - **禁用狀態**: 卡片可被設為禁用 (`.disabled-card`)，視覺上會變灰且不可點擊，並顯示「即將推出」的 `Badge.Ribbon`。

### 5.2 資源列表頁面 (ResourceListPage)

#### 目的
集中管理、探索與操作所有監控中的基礎設施資源。

#### 主要組件
- **工具列**:
  - **主工具列**: 位於表格上方，包含「搜尋框」、「篩選」、「重新載入」、「匯出」及「新增資源」按鈕。
  - **批次操作浮動工具列 (`.batch-actions-floating`)**: 當用戶在表格中選擇多個項目時，此工具列會從底部滑出，提供「批次刪除」等操作。
- **資源表格 (`.table-wrapper`)**:
  - **欄位**: 狀態、資源名稱、IP位址、所屬團隊、類型、標籤、操作。
  - **狀態 (`status`)**: 使用 `.status-badge` 樣式顯示資源健康度。
  - **標籤 (`tags`)**: 使用 Ant Design 的 `Tag` 組件顯示。
- **新增/編輯資源彈窗**:
  - **表單欄位**: 名稱、IP 位址、類型 (下拉選單)、所屬群組 (複選框組)、標籤 (使用 `.smart-tag-input` 自定義組件)。
  - **頁腳**: 使用 `.modal-footer` 統一頁腳樣式。

### 5.3 資源群組頁面 (ResourceGroupsPage)

#### 目的
管理資源的分群，支援階層化，並提供群組層級的狀態摘要與成員管理。

#### 主要組件
- **工具列**:
  - 與資源列表頁面類似，提供搜尋、篩選和「新增群組」等功能。
- **群組表格 (`.table-wrapper`)**:
  - **欄位**: 群組名稱、描述、負責團隊、成員數量、狀態、操作。
  - **狀態**: 使用多個 `Tag` 組件顯示群組內資源的健康度摘要 (Healthy, Warning, Critical)。
- **新增/編輯群組彈窗**:
  - **表單欄位**: 名稱、描述、負責團隊 (下拉選單)。
  - **成員管理**: 使用 Ant Design 的 `Transfer` (穿梭框) 組件，讓用戶在「可用資源」和「群組成員」之間移動資源。

## 6. 分析與報告 (Analyzing)

### 6.1 分析主頁 (AnalyzingPage)

#### 目的
作為分析與報告功能的入口頁面，導航至容量規劃、效能洞察等功能。

#### 主要組件
- **導航卡片 (`.nav-item`)**:
  - 每個卡片對應一個分析子功能。
  - **禁用狀態**: 未實現的功能卡片會顯示為禁用。

### 6.2 容量規劃頁面 (CapacityPlanningPage)

#### 目的
分析歷史數據，預測未來資源消耗趨勢，輔助用戶進行主動的擴容規劃。

#### 主要組件
- **分析表單**:
  - 用戶可選擇「資源群組」、「效能指標」和「預測期間」來啟動分析。
- **分析結果**:
  - **關鍵指標卡片**: 顯示「目前使用率」和「預計達到警戒線天數」。
  - **趨勢預測圖**: 使用 ECharts 繪製，包含歷史數據（實線）和預測趨勢（虛線），並標示出警戒線。
  - **分析與建議列表**:
    - 提供基於分析結果的文字建議。
    - 對於可操作的建議，會提供一個按鈕（如「執行擴容腳本」）來觸發相關的自動化任務。
- **執行確認彈窗**:
  - 當用戶點擊可操作建議時觸發，要求用戶最終確認執行。

## 6. 事件中心 (Incidents)

### 6.1 事件列表頁面 (IncidentListPage)

#### 目的
高效的事故作戰室，用於集中處理、追蹤與解決所有告警事件。

#### 主要組件
- **工具列**:
  - **主工具列**: 提供搜尋、篩選功能。
  - **AI 分析按鈕 (`.btn-ai-analysis`)**: 具有漸層紫色背景的特殊按鈕。
  - **批次操作**: 當選擇多個事件時，會顯示「批次確認」和「批次解決」按鈕。
- **事件表格**:
  - **欄位**: 狀態、嚴重性、觸發時間、資源名稱、處理人、摘要、操作。
  - **狀態與嚴重性**: 使用 `.status-badge` 樣式。
- **事件詳情彈窗**:
  - 點擊事件摘要觸發。
  - 內容包含基本資訊、處理歷史時間軸 (`.incident-timeline`)、關聯事件和自動化執行紀錄。
- **快速靜音彈窗**:
  - 點擊表格操作中的「靜音」按鈕觸發。
  - 提供快速設定靜音持續時間的選項 (如 1, 2, 4 小時等)。

### 6.2 告警規則頁面 (AlertingRulesPage)

#### 目的
定義事件觸發的條件，並可關聯通知與自動化腳本。

#### 主要組件
- **工具列**: 提供搜尋和「新增規則」功能。
- **規則表格**:
  - **欄位**: 啟用 (Switch)、規則名稱、監控對象、資源標籤、觸發條件、操作。
- **新增/編輯規則彈窗 (`.alert-rule-modal`)**:
  - 採用多步驟 (`.steps-container`) 導引模式。
  - **步驟 1: 基本資訊**: 包含範本選擇、規則名稱、描述和資源標籤 (`.smart-tag-input`)。
  - **步驟 2: 觸發條件**: 使用巢狀的 `Form.List` 建立「任一 (OR)」和「所有 (AND)」的複雜條件組合。
  - **步驟 3: 事件內容**: 使用樣板語法 (`{{variable}}`) 自訂事件的標題和內容。
  - **步驟 4: 自動化**: 關聯一個自動化腳本，並可設定其執行參數。

### 6.3 靜音規則頁面 (SilencesPage)

#### 目的
支援單次與週期性靜音，在計畫性維護或已知問題期間自動抑制相關事件通知。

#### 主要組件
- **工具列**: 提供搜尋和「新增規則」功能。
- **靜音規則表格**:
  - **欄位**: 啟用 (Switch)、名稱、狀態、類型 (單次/週期)、匹配條件、排程、下次執行、操作。
  - **狀態**: 使用 `Tag` 顯示「待生效」、「生效中」、「已過期」等。
- **新增/編輯靜音規則彈窗 (`.silence-modal`)**:
  - 採用多步驟 (`.steps-container`) 導引模式。
  - **步驟 1: 基本資訊**: 包含規則名稱和描述。
  - **步驟 2: 設定排程**:
    - **類型**: 單次 (時間範圍選擇) 或週期性。
    - **週期性**: 支援每日、每週、每月等模式，並可設定時間段和有效期限。
  - **步驟 3: 設定範圍**: 設定匹配條件 (`matchers`)，用於過濾要靜音的告警。

## 7. 自動化中心 (Automation)

### 7.1 腳本庫頁面 (ScriptsPage)

#### 目的
提供自動化腳本的開發、管理與測試界面。

#### 主要組件
- **工具列**: 提供搜尋和「新增腳本」功能。
- **腳本表格**:
  - **欄位**: 腳本名稱、類型、創建者、描述、操作。
- **新增/編輯腳本彈窗**:
  - **表單欄位**: 名稱、類型 (下拉選單)、描述、腳本內容 (`TextArea`)。
  - **參數定義**: 使用 `Form.List` 動態新增/刪除腳本的輸入參數，可定義參數名稱和類型。

### 7.2 排程管理頁面 (SchedulesPage)

#### 目的
提供對定時執行任務的完整管理界面，支援簡單與複雜的排程設定。

#### 主要組件
- **工具列**: 提供搜尋和「新增排程」功能。
- **排程表格**:
  - **欄位**: 啟用 (Switch)、任務名稱、執行腳本、CRON 條件、上次狀態、上次執行時間、下次執行、創建者、操作。
- **新增/編輯排程彈窗**:
  - **模式切換**: 提供「簡易模式」和「進階模式」的 `Radio.Group`。
    - **簡易模式**: 提供人性化的頻率選擇 (每分鐘、每小時、每日等) 和對應的時間、日期設定。
    - **進階模式**: 允許用戶直接輸入標準的 CRON 表達式。
  - **動態參數**: 根據選擇的執行腳本，動態加載該腳本所需的參數輸入框。

### 7.3 執行日誌頁面 (ExecutionsPage)

#### 目的
追蹤所有自動化腳本的執行歷史、狀態與結果。

#### 主要組件
- **工具列**: 提供基於時間範圍、使用者、動作類型的篩選功能。
- **日誌表格**:
  - **欄位**: 狀態、腳本名稱、觸發方式、開始時間、執行耗時、操作。
- **執行日誌詳情彈窗**:
  - **日誌檢視器 (`.log-viewer`)**:
    - 以結構化、帶有色彩標記的方式顯示日誌。
    - 提供日誌等級 (`INFO`, `WARN`, `ERROR`) 和關鍵字篩選功能。
    - 提供一鍵複製完整日誌內容的功能。

## 8. 管理中心 (Administration)

### 8.1 人員管理頁面 (UserManagementPage)

#### 目的
管理平台的所有使用者帳號、狀態與權限角色。

#### 主要組件
- **工具列**: 提供搜尋和「新增用戶」功能。
- **用戶表格**:
  - **欄位**: 啟用 (Switch)、姓名、電子郵件、團隊、角色、最後登入、操作。
  - **角色**: 使用 `Tag` 組件顯示。
- **新增/編輯用戶彈窗 (`.user-edit-modal`)**:
  - **表單欄位**: 姓名、電子郵件。
  - **權限設定**:
    - **所屬團隊**: 使用 `Select` (多選) 組件。
    - **角色**: 使用 `Select` (多選) 組件。

### 8.2 團隊管理頁面 (TeamManagementPage)

#### 目的
管理團隊結構、成員配置以及告警通知的訂閱者。

#### 主要組件
- **工具列**: 提供搜尋和「新增團隊」功能。
- **團隊表格**:
  - **欄位**: 團隊名稱、成員數、訂閱者數、負責人、描述、創建時間、操作。
- **新增/編輯團隊彈窗**:
  - **表單欄位**: 團隊名稱、負責人 (下拉選單)、描述。
  - **成員管理**: 使用 `Transfer` (穿梭框) 組件管理團隊成員。
  - **通知訂閱者**: 使用分組的 `Tag` 點選方式，讓用戶從人員、Slack 頻道、Email 群組、On-Call 值班表中選擇訂閱者。

### 8.3 角色管理頁面 (RoleManagementPage)

#### 目的
為平台管理員提供一個管理系統角色與其詳細權限的界面。

#### 主要組件
- **兩欄式佈局**:
  - **左側 (`.role-list-container`)**: 顯示所有角色的列表，包含「新增角色」按鈕。
  - **右側 (`.role-permissions-container`)**: 顯示當前選中角色的權限樹。
- **權限樹**:
  - 使用 Ant Design 的 `Tree` 組件，以樹狀結構展示所有可用權限。
  - 權限可被勾選。對於內建角色，權限樹為禁用狀態。
- **新增角色彈窗**:
  - 包含「角色名稱」輸入框和一個用於設定權限的 `Tree` 組件。

### 8.4 通知策略頁面 (NotificationStrategiesPage)

#### 目的
設定告警通知的路由策略，將告警自動分派給負責的團隊和通知管道。

#### 主要組件
- **新增/編輯策略彈窗**:
  - 採用多步驟導引模式。
  - **步驟 1: 選擇資源群組**: 決定此策略應用的資源範圍。
  - **步驟 2: 設定通知管道**: 根據資源群組自動推薦或手動選擇負責團隊，並勾選該團隊下的通知管道。
  - **步驟 3: 新增匹配條件**: (可選) 新增額外的標籤匹配條件來進一步過濾告警。

### 8.5 通知管道頁面 (NotificationChannelsPage)

#### 目的
提供系統通知管道 (如 Email, Slack, Webhook) 的集中管理、測試與狀態追蹤。

#### 主要組件
- **管道表格**:
  - **欄位**: 啟用 (Switch)、名稱、類型、最近測試結果、最近測試時間、操作。
- **新增/編輯管道彈窗**:
  - **表單欄位**: 根據選擇的管道類型 (Email, Webhook, Slack等)，動態顯示對應的設定欄位 (如 收件人地址、Webhook URL)。
  - **測試按鈕**: 提供「發送測試」功能，驗證管道設定是否正確。

### 8.6 統一標籤管理頁面 (TagKeyManagementPage)

#### 目的
統一管理標籤的 Key (鍵) 與其對應的可選 Value (值)，提供結構化的標籤系統。

#### 主要組件
- **統計卡片**: 顯示標籤總數、標籤值總數、總使用次數等統計資訊。
- **分類篩選**: 提供按「基礎設施」、「應用程序」、「組織結構」等分類篩選標籤。
- **標籤表格**:
  - 可展開的表格，主表顯示標籤 Key 的資訊 (名稱、分類、描述等)。
  - 展開後顯示該 Key 對應的所有可選 Value 及其顏色、使用次數等。
- **新增/編輯 Key 彈窗**: 用於定義一個新的標籤 Key。
- **新增/編輯 Value 彈窗**: 用於為指定的 Key 新增或修改一個可選值。

### 8.7 系統設定頁面 (SystemSettingsPage)

#### 目的
為平台管理員提供設定平台級別全域參數的界面。

#### 主要組件
- **分頁表單**:
  - **認證設定**: 設定 OIDC 相關參數。
  - **郵件伺服器設定**: 設定 SMTP 伺服器參數。

### 8.8 平台狀態診斷頁面 (PlatformDiagnosticsPage)

#### 目的
監控 SRE 平台自身的健康狀況，例如自動化腳本和通知管道的成功率。

#### 主要組件
- **健康度表格**:
  - 分別顯示「自動化健康度」和「通知管道健康度」。
  - **欄位**: 名稱、總次數、失敗率。
  - **失敗率**: 使用帶有顏色標記的 `Progress` 組件和百分比文字顯示。

### 8.9 審計日誌頁面 (AuditLogsPage)

#### 目的
追蹤平台重要操作的審計紀錄，用於追溯與合規。

#### 主要組件
- **篩選工具列**: 提供基於時間範圍、使用者、動作類型的篩選功能。
- **日誌表格**:
  - **欄位**: 時間、操作者、動作、資源類型、資源名稱、結果、操作。
- **日誌詳情抽屜 (Drawer)**:
  - 點擊「查看詳情」後從右側滑出。
  - 顯示單條日誌的完整資訊，包括變更差異 (Diff)。

## 9. 個人資料頁面 (ProfilePage)

#### 目的
允許當前登入用戶管理自己的個人資訊、密碼與通知偏好。

#### 主要組件
- **分頁佈局**:
  - **個人資訊**: 修改姓名等。
  - **密碼安全**: 修改密碼。
  - **通知設定**: 設定介面主題 (暗色/亮色)、預設頁面、時區等。