<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SRE 平台設計指南 - Design Guide</title>

  <!-- React, Babel, Day.js -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
  <script src="https://unpkg.com/dayjs@1.11.10/dayjs.min.js"></script>

  <!-- Ant Design -->
  <script src="https://unpkg.com/antd@5.19.1/dist/antd.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/antd@5.19.1/dist/reset.css" />

  <!-- Ant Design Icons -->
  <script src="https://unpkg.com/@ant-design/icons@5.3.7/dist/index.umd.min.js"></script>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .guide-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      text-align: center;
    }

    .guide-section {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .component-demo {
      padding: 20px;
      border: 1px solid #d9d9d9;
      border-radius: 8px;
      margin: 16px 0;
      background: #fafafa;
    }

    /* 深色主題變數 */
    :root {
      --brand-primary: #1890ff;
      --brand-success: #52c41a;
      --brand-warning: #faad14;
      --brand-danger: #ff4d4f;
      --text-primary: rgba(255, 255, 255, 0.95);
      --text-secondary: rgba(255, 255, 255, 0.85);
      --bg-page: #0A0B0E;
      --bg-container: #141519;
      --bg-elevated: #1A1D23;
      --border-base: rgba(255, 255, 255, 0.12);
      --radius-xl: 12px;
      --spacing-lg: 16px;
    }

    /* 深色主題樣式 */
    .dark-theme {
      background: var(--bg-page) !important;
      color: var(--text-primary) !important;
    }

    .dark-theme .guide-section {
      background: var(--bg-container) !important;
      border: 1px solid var(--border-base) !important;
      color: var(--text-primary) !important;
    }

    .dark-theme .component-demo {
      background: var(--bg-elevated) !important;
      border-color: var(--border-base) !important;
      color: var(--text-primary) !important;
    }

    /* === 統一標籤系統樣式 === */
    .ant-tag {
      border-radius: 12px !important;
      font-size: 11px !important;
      font-weight: 500 !important;
      padding: 2px 8px !important;
      border: 1px solid transparent !important;
      display: inline-flex !important;
      align-items: center !important;
      gap: 2px !important;
      transition: all 0.2s ease !important;
    }

    /* 嚴重性標籤 */
    .ant-tag[color="red"],
    .ant-tag.severity-critical {
      background: linear-gradient(135deg, rgba(255, 77, 79, 0.15) 0%, rgba(255, 77, 79, 0.08) 100%) !important;
      color: #ff4d4f !important;
      border-color: rgba(255, 77, 79, 0.3) !important;
    }

    .ant-tag[color="orange"],
    .ant-tag.severity-warning {
      background: linear-gradient(135deg, rgba(250, 173, 20, 0.15) 0%, rgba(250, 173, 20, 0.08) 100%) !important;
      color: #faad14 !important;
      border-color: rgba(250, 173, 20, 0.3) !important;
    }

    .ant-tag[color="green"],
    .ant-tag.severity-success {
      background: linear-gradient(135deg, rgba(82, 196, 26, 0.15) 0%, rgba(82, 196, 26, 0.08) 100%) !important;
      color: #52c41a !important;
      border-color: rgba(82, 196, 26, 0.3) !important;
    }

    .ant-tag[color="blue"],
    .ant-tag.severity-info {
      background: linear-gradient(135deg, rgba(24, 144, 255, 0.15) 0%, rgba(24, 144, 255, 0.08) 100%) !important;
      color: #1890ff !important;
      border-color: rgba(24, 144, 255, 0.3) !important;
    }

    .ant-tag[color="purple"] {
      background: linear-gradient(135deg, rgba(114, 46, 209, 0.15) 0%, rgba(114, 46, 209, 0.08) 100%) !important;
      color: #722ed1 !important;
      border-color: rgba(114, 46, 209, 0.3) !important;
    }

    .ant-tag[color="gray"],
    .ant-tag[color="default"] {
      background: linear-gradient(135deg, rgba(140, 140, 140, 0.15) 0%, rgba(140, 140, 140, 0.08) 100%) !important;
      color: #8c8c8c !important;
      border-color: rgba(140, 140, 140, 0.3) !important;
    }

    /* 小尺寸標籤 */
    .ant-tag.ant-tag-sm {
      font-size: 10px !important;
      padding: 1px 6px !important;
      border-radius: 10px !important;
    }

    /* 可點擊標籤 hover 效果 */
    .ant-tag[style*="cursor: pointer"]:hover,
    .ant-tag.clickable:hover {
      transform: translateY(-1px) !important;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
    }

    /* === 狀態標籤樣式 - 事件列表使用 === */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: var(--radius-xl);
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      transition: all 0.2s ease;
    }

    .status-badge::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.6;
        transform: scale(0.8);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .status-critical,
    .status-badge-critical {
      background: rgba(255, 107, 107, 0.12);
      color: var(--brand-danger);
      border: 1px solid rgba(255, 107, 107, 0.24);
    }

    .status-warning,
    .status-badge-warning {
      background: rgba(255, 184, 77, 0.12);
      color: var(--brand-warning);
      border: 1px solid rgba(255, 184, 77, 0.24);
    }

    .status-new {
      background: rgba(24, 144, 255, 0.12);
      color: var(--brand-primary);
      border: 1px solid rgba(24, 144, 255, 0.24);
    }

    .status-acknowledged {
      background: rgba(250, 173, 20, 0.12);
      color: #faad14;
      border: 1px solid rgba(250, 173, 20, 0.24);
    }

    .status-resolved {
      background: rgba(95, 207, 128, 0.12);
      color: var(--brand-success);
      border: 1px solid rgba(95, 207, 128, 0.24);
    }

    .status-silenced {
      background: rgba(140, 140, 140, 0.12);
      color: #8c8c8c;
      border: 1px solid rgba(140, 140, 140, 0.24);
    }
  </style>
</head>

<body>
  <div id="guide-root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const {
      Button, Space, Table, Modal, Form, Input, Select, Card, Row, Col,
      Statistic, Popover, Drawer, Tag, Switch, InputNumber, DatePicker,
      Divider, Typography, ConfigProvider, theme, message, Badge, Tooltip,
      Tabs, Radio, Checkbox, Descriptions, Timeline, Steps
    } = antd;
    const {
      PlusOutlined, EditOutlined, DeleteOutlined, SearchOutlined,
      FilterOutlined, SettingOutlined, EyeOutlined, PlayCircleOutlined,
      HistoryOutlined, CheckCircleOutlined, PauseCircleOutlined,
      SaveOutlined, CloseOutlined, UserOutlined, MailOutlined, LockOutlined,
      DatabaseOutlined, CloudOutlined, GlobalOutlined
    } = icons;

    const { Title, Text, Paragraph } = Typography;
    const { RangePicker } = DatePicker;
    const { TextArea } = Input;

    // 主應用組件
    const DesignGuide = () => {
      const [isDarkTheme, setIsDarkTheme] = useState(true);
      const [activeSection, setActiveSection] = useState('overview');

      const themeConfig = {
        algorithm: isDarkTheme ? theme.darkAlgorithm : theme.defaultAlgorithm,
        token: {
          colorPrimary: '#1890ff',
          colorSuccess: '#52c41a',
          colorWarning: '#faad14',
          colorError: '#ff4d4f',
        }
      };

      // 總覽頁面
      const OverviewDemo = () => (
        <div className="component-demo">
          <Title level={4} style={{ marginBottom: '16px' }}>SRE 平台設計系統總覽</Title>

          <Row gutter={[24, 24]}>
            <Col span={8}>
              <Card title="🎨 設計語言" size="small">
                <ul style={{ paddingLeft: '20px', margin: 0 }}>
                  <li>Ant Design 5.x 組件庫</li>
                  <li>自訂深色主題</li>
                  <li>統一的色彩系統</li>
                  <li>8px 網格間距</li>
                </ul>
              </Card>
            </Col>
            <Col span={8}>
              <Card title="🏗️ 架構模式" size="small">
                <ul style={{ paddingLeft: '20px', margin: 0 }}>
                  <li>工具列 + 內容區域</li>
                  <li>集中式篩選</li>
                  <li>響應式佈局</li>
                  <li>統一的分頁</li>
                </ul>
              </Card>
            </Col>
            <Col span={8}>
              <Card title="📱 互動模式" size="small">
                <ul style={{ paddingLeft: '20px', margin: 0 }}>
                  <li>即時搜尋</li>
                  <li>Popover 篩選</li>
                  <li>抽屜式詳情</li>
                  <li>多標籤頁表單</li>
                </ul>
              </Card>
            </Col>
          </Row>

          <Divider />

          <Title level={5}>快速開始</Title>
          <Space direction="vertical" style={{ width: '100%' }}>
            <Text>1. 選擇右側標籤頁查看具體組件示例</Text>
            <Text>2. 切換淺色/深色主題觀察差異</Text>
            <Text>3. 點擊按鈕體驗互動效果</Text>
            <Text>4. 參考代碼結構進行開發</Text>
          </Space>
        </div>
      );

      // 頁面結構示例組件
      const PageStructureDemo = () => {
        const [searchText, setSearchText] = useState('');
        const [isFilterOpen, setIsFilterOpen] = useState(false);
        const [filters, setFilters] = useState({ status: [], type: [] });

        const filterContent = (
          <div style={{ width: 300, padding: '16px' }}>
            <div style={{ marginBottom: '16px' }}>
              <Text strong style={{ display: 'block', marginBottom: '8px' }}>狀態</Text>
              <Select
                mode="multiple"
                placeholder="選擇狀態"
                value={filters.status}
                onChange={(value) => setFilters(f => ({ ...f, status: value }))}
                style={{ width: '100%' }}
                options={[
                  { value: 'healthy', label: 'Healthy' },
                  { value: 'warning', label: 'Warning' },
                  { value: 'critical', label: 'Critical' }
                ]}
              />
            </div>
            <div style={{ marginBottom: '16px' }}>
              <Text strong style={{ display: 'block', marginBottom: '8px' }}>類型</Text>
              <Select
                mode="multiple"
                placeholder="選擇類型"
                value={filters.type}
                onChange={(value) => setFilters(f => ({ ...f, type: value }))}
                style={{ width: '100%' }}
                options={[
                  { value: 'database', label: 'Database' },
                  { value: 'server', label: 'Server' },
                  { value: 'gateway', label: 'Gateway' }
                ]}
              />
            </div>
            <div style={{ display: 'flex', justifyContent: 'space-between', gap: '8px' }}>
              <Button onClick={() => setFilters({ status: [], type: [] })} style={{ flex: 1 }}>
                重置
              </Button>
              <Button type="primary" onClick={() => setIsFilterOpen(false)} style={{ flex: 1 }}>
                應用
              </Button>
            </div>
          </div>
        );

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>標準頁面佈局示例</Title>

            {/* 頁面標題 - 可選 */}
            <Title level={2} style={{ marginBottom: '24px' }}>資源列表</Title>

            {/* 工具列 */}
            <Space style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '16px', width: '100%' }}>
              <Space>
                <Input.Search
                  placeholder="搜尋資源名稱、IP或標籤..."
                  style={{ width: 300 }}
                  value={searchText}
                  onChange={(e) => setSearchText(e.target.value)}
                  allowClear
                />
                <Popover
                  content={filterContent}
                  title="篩選條件"
                  trigger="click"
                  open={isFilterOpen}
                  onOpenChange={setIsFilterOpen}
                  placement="bottomLeft"
                >
                  <Button icon={<FilterOutlined />}>
                    篩選
                    <Badge count={filters.status.length + filters.type.length} style={{ marginLeft: 8 }} />
                  </Button>
                </Popover>
              </Space>
              <Space>
                <Button icon={<SettingOutlined />}>欄位設定</Button>
                <Button icon={<SearchOutlined />}>掃描網路</Button>
                <Button type="primary" icon={<PlusOutlined />}>新增資源</Button>
              </Space>
            </Space>

            {/* 統計卡片區域 */}
            <Row gutter={[16, 16]} style={{ marginBottom: '24px' }}>
              <Col span={6}>
                <Card size="small">
                  <Statistic title="總資源數" value={374} />
                </Card>
              </Col>
              <Col span={6}>
                <Card size="small">
                  <Statistic title="健康資源" value={138} valueStyle={{ color: '#52c41a' }} />
                </Card>
              </Col>
              <Col span={6}>
                <Card size="small">
                  <Statistic title="警告資源" value={143} valueStyle={{ color: '#faad14' }} />
                </Card>
              </Col>
              <Col span={6}>
                <Card size="small">
                  <Statistic title="嚴重資源" value={93} valueStyle={{ color: '#ff4d4f' }} />
                </Card>
              </Col>
            </Row>

            <Text strong>表格區域將在下方「表格組件」章節中展示完整示例</Text>
          </div>
        );
      };

      // 按鈕系統示例組件
      const ButtonSystemDemo = () => {
        const [loading, setLoading] = useState(false);

        const handleClick = () => {
          setLoading(true);
          setTimeout(() => setLoading(false), 2000);
        };

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>按鈕系統示例</Title>

            <Space direction="vertical" size="large" style={{ width: '100%' }}>
              {/* 主要操作按鈕 */}
              <div>
                <Text strong style={{ display: 'block', marginBottom: '8px' }}>主要操作按鈕：</Text>
                <Space wrap>
                  <Button type="primary" icon={<PlusOutlined />}>新增</Button>
                  <Button type="primary" icon={<SaveOutlined />}>儲存</Button>
                  <Button type="primary" icon={<CheckCircleOutlined />}>確認</Button>
                  <Button type="primary" loading={loading} onClick={handleClick}>應用</Button>
                </Space>
              </div>

              {/* 危險操作按鈕 */}
              <div>
                <Text strong style={{ display: 'block', marginBottom: '8px' }}>危險操作按鈕：</Text>
                <Space wrap>
                  <Button danger icon={<DeleteOutlined />}>刪除</Button>
                  <Button danger icon={<CloseOutlined />}>取消</Button>
                  <Button danger>停用</Button>
                </Space>
              </div>

              {/* 次要操作按鈕 */}
              <div>
                <Text strong style={{ display: 'block', marginBottom: '8px' }}>次要操作按鈕：</Text>
                <Space wrap>
                  <Button icon={<EditOutlined />}>編輯</Button>
                  <Button icon={<EyeOutlined />}>查看</Button>
                  <Button icon={<HistoryOutlined />}>歷史</Button>
                  <Button icon={<SettingOutlined />}>設定</Button>
                </Space>
              </div>

              {/* 文字按鈕 - 用於表格內操作 */}
              <div>
                <Text strong style={{ display: 'block', marginBottom: '8px' }}>文字按鈕 (表格內操作)：</Text>
                <Space wrap>
                  <Button type="text" icon={<EditOutlined />} size="small" />
                  <Button type="text" icon={<DeleteOutlined />} size="small" danger />
                  <Button type="text" icon={<EyeOutlined />} size="small">查看詳情</Button>
                </Space>
              </div>
            </Space>
          </div>
        );
      };

      // 事件列表表格示例 - SRE 平台標準實現
      const IncidentTableDemo = () => {
        const [selectedRowKeys, setSelectedRowKeys] = useState([]);
        const [searchText, setSearchText] = useState('');
        const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);
        const [currentIncident, setCurrentIncident] = useState(null);

        // 模擬事件數據
        const mockIncidents = [
          { key: 'i_1', summary: 'CPU high on db-mysql-prod-02', severity: 'critical', source: 'Prometheus', status: 'acknowledged', created_at: dayjs().subtract(5, 'minutes'), assignee: 'user_2', resource_name: 'db-mysql-prod-02', service: '資料庫服務', business_impact: '高' },
          { key: 'i_2', summary: 'Disk space low on srv-web-prod-02', severity: 'warning', source: 'Grafana', status: 'new', created_at: dayjs().subtract(2, 'hour'), assignee: null, resource_name: 'srv-web-prod-02', service: 'Web應用', business_impact: '中' },
          { key: 'i_3', summary: 'API latency over 500ms', severity: 'warning', source: 'Datadog', status: 'acknowledged', created_at: dayjs().subtract(1, 'day'), assignee: 'user_4', resource_name: 'srv-api-prod-01', service: 'API閘道', business_impact: '高' },
          { key: 'i_4', summary: 'Prometheus Server Down', severity: 'critical', source: 'Kubernetes', status: 'resolved', created_at: dayjs().subtract(3, 'day'), assignee: 'user_1', resource_name: 'mon-prometheus-prod-01', service: '監控系統', business_impact: '中' },
          { key: 'i_5', summary: '記憶體使用率過高 - staging', severity: 'warning', source: 'Prometheus', status: 'new', created_at: dayjs().subtract(15, 'minutes'), assignee: null, resource_name: 'srv-web-stg-01', service: 'Web應用', business_impact: '低' },
        ];

        // 事件狀態處理
        const handleStatusChange = (keys, newStatus) => {
          // 在實際實現中，這裡會調用 API 更新狀態
          message.success(`事件狀態已更新為 ${newStatus === 'acknowledged' ? '已確認' : '已解決'}`);
        };

        const showDetailModal = (record) => {
          setCurrentIncident(record);
          setIsDetailModalOpen(true);
        };

        // 表格欄位定義
        const columns = [
          {
            title: '嚴重性',
            dataIndex: 'severity',
            width: '8%',
            sorter: (a, b) => a.severity.localeCompare(b.severity),
            render: (severity) => (
              <span className={`status-badge status-${severity}`}>
                {severity ? severity.toUpperCase() : 'UNKNOWN'}
              </span>
            )
          },
          {
            title: '摘要',
            dataIndex: 'summary',
            width: '25%',
            sorter: (a, b) => a.summary.localeCompare(b.summary),
            render: (text, record) => (
              <a
                onClick={() => showDetailModal(record)}
                style={{ color: '#1890ff', textDecoration: 'none', cursor: 'pointer' }}
                onMouseEnter={(e) => e.target.style.textDecoration = 'underline'}
                onMouseLeave={(e) => e.target.style.textDecoration = 'none'}
              >
                {text}
              </a>
            )
          },
          {
            title: '資源名稱',
            dataIndex: 'resource_name',
            width: '14%',
            sorter: (a, b) => (a || '').localeCompare(b || ''),
            render: name => name || '-'
          },
          {
            title: '業務影響',
            dataIndex: 'business_impact',
            width: '10%',
            sorter: (a, b) => (a.business_impact || '').localeCompare(b.business_impact || ''),
            render: (impact) => {
              const color = impact === '高' ? 'red' : impact === '中' ? 'orange' : 'blue';
              return <Tag color={color}>{impact || '-'}</Tag>;
            }
          },
          {
            title: '狀態',
            dataIndex: 'status',
            width: '8%',
            render: (status) => {
              const statusText = {
                new: 'NEW',
                acknowledged: 'ACK',
                resolved: 'RESOLVED',
                silenced: 'SILENCED'
              };

              return (
                <span className={`status-badge status-${status}`}>
                  {statusText[status] || 'UNKNOWN'}
                </span>
              );
            }
          },
          {
            title: '處理人',
            dataIndex: 'assignee',
            width: '8%',
            sorter: (a, b) => (a || '').localeCompare(b || ''),
            render: (assignee) => assignee || '-'
          },
          {
            title: '觸發時間',
            dataIndex: 'created_at',
            width: '12%',
            sorter: (a, b) => a.created_at.valueOf() - b.created_at.valueOf(),
            render: time => (
              <span title={time ? time.format('YYYY-MM-DD HH:mm:ss') : ''}>
                {time ? time.fromNow() : '-'}
              </span>
            )
          },
          {
            title: '操作',
            key: 'action',
            width: '15%',
            render: (_, record) => (
              <Space size="small">
                <Tooltip title="確認事件" placement="top">
                  <Button
                    type="text"
                    icon={<CheckCircleOutlined style={{ color: '#52c41a' }} />}
                    disabled={record.status !== 'new'}
                    onClick={() => handleStatusChange([record.key], 'acknowledged')}
                  />
                </Tooltip>
                <Tooltip title="解決事件" placement="top">
                  <Button
                    type="text"
                    icon={<CheckCircleOutlined style={{ color: '#1890ff' }} />}
                    disabled={record.status === 'resolved'}
                    onClick={() => handleStatusChange([record.key], 'resolved')}
                  />
                </Tooltip>
                <Tooltip title="查看詳情" placement="top">
                  <Button
                    type="text"
                    icon={<EyeOutlined />}
                    onClick={() => showDetailModal(record)}
                  />
                </Tooltip>
              </Space>
            )
          }
        ];

        // 篩選邏輯
        const filteredIncidents = mockIncidents.filter(incident =>
          incident.summary.toLowerCase().includes(searchText.toLowerCase()) ||
          incident.resource_name.toLowerCase().includes(searchText.toLowerCase()) ||
          (incident.assignee && incident.assignee.toLowerCase().includes(searchText.toLowerCase()))
        );

        const rowSelection = {
          selectedRowKeys,
          onChange: setSelectedRowKeys,
          columnWidth: 32
        };

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>事件列表表格 - SRE 平台標準實現</Title>

            <Paragraph>
              這是 SRE 平台的事件管理核心組件，包含完整的篩選、排序、分頁和批量操作功能。
            </Paragraph>

            {/* 工具列 */}
            <Space style={{
              display: 'flex',
              justifyContent: 'space-between',
              alignItems: 'center',
              marginBottom: 'var(--spacing-lg)',
              width: '100%'
            }}>
              <Space>
                <Input.Search
                  placeholder="搜尋事件摘要、資源或處理人..."
                  value={searchText}
                  onChange={e => setSearchText(e.target.value)}
                  style={{ width: 300 }}
                  allowClear
                />
                <Button icon={<FilterOutlined />}>
                  篩選
                </Button>
              </Space>
              <Space>
                <Button icon={<DownloadOutlined />}>匯出</Button>
                <Button type="primary" icon={<RobotOutlined />}>
                  AI 分析
                </Button>
              </Space>
            </Space>

            {/* 批量操作提示 */}
            {selectedRowKeys.length > 0 && (
              <div style={{ marginBottom: '16px', padding: '12px', background: 'rgba(24, 144, 255, 0.1)', borderRadius: '6px' }}>
                <Text strong>已選擇 {selectedRowKeys.length} 個事件</Text>
                <Button type="link" size="small" style={{ marginLeft: '16px' }} onClick={() => setSelectedRowKeys([])}>
                  清除選擇
                </Button>
                <Button type="primary" size="small" style={{ marginLeft: '8px' }} onClick={() => handleStatusChange(selectedRowKeys, 'acknowledged')}>
                  批量確認
                </Button>
                <Button size="small" style={{ marginLeft: '8px' }} onClick={() => handleStatusChange(selectedRowKeys, 'resolved')}>
                  批量解決
                </Button>
              </div>
            )}

            {/* 事件表格 */}
            <Table
              rowSelection={rowSelection}
              columns={columns}
              dataSource={filteredIncidents}
              rowKey="key"
              className="transparent-bg"
              size="small"
              pagination={{
                pageSize: 10,
                position: ['bottomRight'],
                showSizeChanger: true,
                showQuickJumper: true,
                showTotal: (total, range) => `第 ${range[0]}-${range[1]} 項，共 ${total} 項`
              }}
              scroll={{ x: 'max-content' }}
            />

            {/* 事件詳情模態框 */}
            <Modal
              title={
                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                  <InfoCircleOutlined style={{ color: '#1890ff' }} />
                  <span>事件詳情</span>
                </div>
              }
              open={isDetailModalOpen}
              onCancel={() => setIsDetailModalOpen(false)}
              footer={
                <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>
                  <Button onClick={() => setIsDetailModalOpen(false)}>關閉</Button>
                  {currentIncident && currentIncident.status === 'new' && (
                    <Button type="primary" onClick={() => {
                      handleStatusChange([currentIncident.key], 'acknowledged');
                      setIsDetailModalOpen(false);
                    }}>
                      確認收到 (Ack)
                    </Button>
                  )}
                </div>
              }
              width={800}
            >
              {currentIncident && (
                <div>
                  <Descriptions bordered column={1} size="small">
                    <Descriptions.Item label="摘要">{currentIncident.summary}</Descriptions.Item>
                    <Descriptions.Item label="嚴重性">
                      <Tag color={currentIncident.severity === 'critical' ? 'red' : 'orange'}>
                        {currentIncident.severity ? currentIncident.severity.toUpperCase() : 'UNKNOWN'}
                      </Tag>
                    </Descriptions.Item>
                    <Descriptions.Item label="狀態">
                      <span className={`status-badge status-${currentIncident.status}`}>
                        {currentIncident.status ? currentIncident.status.toUpperCase() : 'UNKNOWN'}
                      </span>
                    </Descriptions.Item>
                    <Descriptions.Item label="來源">{currentIncident.source}</Descriptions.Item>
                    <Descriptions.Item label="觸發時間">
                      {currentIncident.created_at ? currentIncident.created_at.format('YYYY-MM-DD HH:mm:ss') : '-'}
                    </Descriptions.Item>
                    <Descriptions.Item label="資源名稱">{currentIncident.resource_name || '-'}</Descriptions.Item>
                    <Descriptions.Item label="業務影響">
                      <Tag color={currentIncident.business_impact === '高' ? 'red' : currentIncident.business_impact === '中' ? 'orange' : 'blue'}>
                        {currentIncident.business_impact || '-'}
                      </Tag>
                    </Descriptions.Item>
                    <Descriptions.Item label="處理人">{currentIncident.assignee || '-'}</Descriptions.Item>
                  </Descriptions>
                </div>
              )}
            </Modal>

            <Divider />

            <div style={{ marginTop: '16px' }}>
              <Title level={5}>實現特點</Title>
              <ul style={{ paddingLeft: '20px', margin: 0 }}>
                <li><strong>狀態管理：</strong> 使用統一的狀態標籤系統，支援動畫效果</li>
                <li><strong>交互設計：</strong> 摘要欄位可點擊查看詳情，操作按鈕有清晰的工具提示</li>
                <li><strong>批量操作：</strong> 支援多選和批量狀態更新</li>
                <li><strong>響應式設計：</strong> 表格支援橫向滾動，適配不同螢幕尺寸</li>
                <li><strong>搜尋篩選：</strong> 即時搜尋功能，支援多欄位匹配</li>
                <li><strong>詳情展示：</strong> 模態框詳情頁面，包含完整的事件資訊</li>
              </ul>
            </div>

            <div style={{ marginTop: '16px' }}>
              <Title level={5}>代碼結構</Title>
              <div style={{
                background: isDarkTheme ? '#0f1419' : '#f6f8fa',
                padding: '16px',
                borderRadius: '8px',
                fontFamily: 'Monaco, Consolas, monospace',
                fontSize: '12px',
                overflow: 'auto'
              }}>
                <pre style={{ margin: 0, color: isDarkTheme ? '#e6e6e6' : '#333' }}>{`// 事件列表組件核心結構
const IncidentTableDemo = () => {
  const [selectedRowKeys, setSelectedRowKeys] = useState([]);
  const [searchText, setSearchText] = useState('');

  // 表格欄位定義
  const columns = [
    {
      title: '嚴重性',
      render: (severity) => (
        <span className={\`status-badge status-\${severity}\`}>
          {severity.toUpperCase()}
        </span>
      )
    },
    {
      title: '摘要',
      render: (text, record) => (
        <a onClick={() => showDetailModal(record)}>
          {text}
        </a>
      )
    },
    // ... 其他欄位
  ];

  // 批量操作處理
  const handleStatusChange = (keys, newStatus) => {
    // 更新狀態邏輯
  };

  return (
    <Table
      rowSelection={rowSelection}
      columns={columns}
      dataSource={filteredIncidents}
      className="transparent-bg"
    />
  );
};`}</pre>
              </div>
            </div>
          </div>
        );
      };

      // 表格組件示例
      const TableDemo = () => {
        const [selectedRowKeys, setSelectedRowKeys] = useState([]);

        const mockData = [
          { key: '1', name: 'db-prod-01', status: 'healthy', type: 'database', ip: '10.0.0.10' },
          { key: '2', name: 'web-prod-01', status: 'warning', type: 'server', ip: '10.0.0.11' },
          { key: '3', name: 'api-gateway', status: 'critical', type: 'gateway', ip: '10.0.0.12' },
        ];

        const columns = [
          {
            title: '狀態',
            dataIndex: 'status',
            width: '8%',
            render: (status) => (
              <Tag color={
                status === 'healthy' ? 'green' :
                  status === 'warning' ? 'orange' : 'red'
              }>
                {status.toUpperCase()}
              </Tag>
            )
          },
          { title: '資源名稱', dataIndex: 'name', width: '25%' },
          { title: 'IP位址', dataIndex: 'ip', width: '18%' },
          { title: '類型', dataIndex: 'type', width: '10%' },
          {
            title: '操作',
            key: 'action',
            width: '15%',
            render: (_, record) => (
              <Space size="small">
                <Tooltip title="編輯">
                  <Button type="text" icon={<EditOutlined />} size="small" />
                </Tooltip>
                <Tooltip title="刪除">
                  <Button type="text" danger icon={<DeleteOutlined />} size="small" />
                </Tooltip>
              </Space>
            )
          }
        ];

        const rowSelection = {
          selectedRowKeys,
          onChange: setSelectedRowKeys,
          columnWidth: 32
        };

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>基礎表格組件示例</Title>

            {selectedRowKeys.length > 0 && (
              <div style={{ marginBottom: '16px', padding: '8px', background: 'rgba(24, 144, 255, 0.1)', borderRadius: '4px' }}>
                <Text>已選擇 {selectedRowKeys.length} 項</Text>
                <Button type="link" size="small" style={{ marginLeft: '16px' }} onClick={() => setSelectedRowKeys([])}>
                  清除選擇
                </Button>
              </div>
            )}

            <Table
              rowSelection={rowSelection}
              columns={columns}
              dataSource={mockData}
              rowKey="key"
              size="small"
              pagination={{
                pageSize: 10,
                position: ['bottomRight'],
                showSizeChanger: true,
                showQuickJumper: true
              }}
              scroll={{ x: 'max-content' }}
            />
          </div>
        );
      };

      // 表單設計示例
      const FormDemo = () => {
        const [form] = Form.useForm();
        const [modalVisible, setModalVisible] = useState(false);
        const [drawerVisible, setDrawerVisible] = useState(false);

        const handleSubmit = (values) => {
          console.log('表單數據:', values);
          message.success('表單提交成功！');
          setModalVisible(false);
          setDrawerVisible(false);
        };

        const formContent = (
          <Form form={form} layout="vertical" onFinish={handleSubmit}>
            <Row gutter={[16, 16]}>
              <Col span={12}>
                <Form.Item
                  label="資源名稱"
                  name="name"
                  rules={[{ required: true, message: '請輸入資源名稱' }]}
                >
                  <Input placeholder="請輸入資源名稱" />
                </Form.Item>
              </Col>
              <Col span={12}>
                <Form.Item
                  label="IP位址"
                  name="ip"
                  rules={[{ required: true, message: '請輸入IP位址' }]}
                >
                  <Input placeholder="請輸入IP位址" />
                </Form.Item>
              </Col>
              <Col span={12}>
                <Form.Item label="類型" name="type">
                  <Select placeholder="請選擇類型">
                    <Select.Option value="database">Database</Select.Option>
                    <Select.Option value="server">Server</Select.Option>
                    <Select.Option value="gateway">Gateway</Select.Option>
                  </Select>
                </Form.Item>
              </Col>
              <Col span={12}>
                <Form.Item label="狀態" name="status">
                  <Radio.Group>
                    <Radio value="active">啟用</Radio>
                    <Radio value="inactive">停用</Radio>
                  </Radio.Group>
                </Form.Item>
              </Col>
              <Col span={24}>
                <Form.Item label="描述" name="description">
                  <TextArea rows={3} placeholder="請輸入資源描述" />
                </Form.Item>
              </Col>
            </Row>
          </Form>
        );

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>表單設計示例</Title>

            <Space style={{ marginBottom: '16px' }}>
              <Button type="primary" onClick={() => setModalVisible(true)}>
                開啟表單彈窗 (600px)
              </Button>
              <Button onClick={() => setDrawerVisible(true)}>
                開啟表單抽屜 (700px)
              </Button>
            </Space>

            {/* 彈窗表單 */}
            <Modal
              title="新增資源"
              open={modalVisible}
              onCancel={() => setModalVisible(false)}
              width={600}
              footer={[
                <Button key="cancel" onClick={() => setModalVisible(false)}>
                  取消
                </Button>,
                <Button key="submit" type="primary" onClick={() => form.submit()}>
                  儲存
                </Button>
              ]}
            >
              {formContent}
            </Modal>

            {/* 抽屜表單 */}
            <Drawer
              title="編輯資源"
              placement="right"
              width={700}
              open={drawerVisible}
              onClose={() => setDrawerVisible(false)}
              extra={
                <Space>
                  <Button onClick={() => setDrawerVisible(false)}>取消</Button>
                  <Button type="primary" onClick={() => form.submit()}>儲存</Button>
                </Space>
              }
            >
              {formContent}
            </Drawer>

            <Text type="secondary" style={{ marginTop: '16px', display: 'block' }}>
              💡 提示：表單使用 vertical 佈局，標籤寬度統一，支援響應式網格
            </Text>
          </div>
        );
      };

      // 標籤系統示例
      const TagSystemDemo = () => {
        const [selectedDemo, setSelectedDemo] = useState('severity');

        return (
          <div className="component-demo">
            <Title level={4} style={{ marginBottom: '16px' }}>🏷️ 統一標籤系統</Title>

            <Paragraph>
              SRE 平台使用統一的標籤系統，所有標籤都遵循一致的視覺設計和語義。
              標籤採用漸變背景、圓角邊框和統一的字體樣式。
            </Paragraph>

            <Tabs activeKey={selectedDemo} onChange={setSelectedDemo} style={{ marginBottom: '24px' }}>
              <Tabs.TabPane tab="嚴重性標籤" key="severity">
                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>嚴重性等級</Title>
                  <Space wrap>
                    <Tag color="red">CRITICAL</Tag>
                    <Tag color="orange">WARNING</Tag>
                    <Tag color="blue">INFO</Tag>
                    <Tag color="green">SUCCESS</Tag>
                  </Space>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <Text strong>使用案例：</Text>
                  <div style={{ marginTop: '8px' }}>
                    <Tag color="red">🔴 CRITICAL</Tag> 系統宕機、資料遺失
                  </div>
                  <div style={{ marginTop: '4px' }}>
                    <Tag color="orange">🟡 WARNING</Tag> 效能下降、資源不足
                  </div>
                  <div style={{ marginTop: '4px' }}>
                    <Tag color="blue">🔵 INFO</Tag> 一般資訊、狀態變更
                  </div>
                  <div style={{ marginTop: '4px' }}>
                    <Tag color="green">🟢 SUCCESS</Tag> 操作成功、系統正常
                  </div>
                </div>
              </Tabs.TabPane>

              <Tabs.TabPane tab="狀態標籤" key="status">
                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>系統狀態</Title>
                  <Space wrap>
                    <Tag color="green">HEALTHY</Tag>
                    <Tag color="orange">WARNING</Tag>
                    <Tag color="red">CRITICAL</Tag>
                    <Tag color="gray">UNKNOWN</Tag>
                  </Space>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>處理狀態</Title>
                  <Space wrap>
                    <Tag color="blue">NEW</Tag>
                    <Tag color="orange">ACKNOWLEDGED</Tag>
                    <Tag color="green">RESOLVED</Tag>
                    <Tag color="red">FAILED</Tag>
                  </Space>
                </div>
              </Tabs.TabPane>

              <Tabs.TabPane tab="業務標籤" key="business">
                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>業務影響等級</Title>
                  <Space wrap>
                    <Tag color="red">高影響</Tag>
                    <Tag color="orange">中影響</Tag>
                    <Tag color="blue">低影響</Tag>
                  </Space>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>環境標籤</Title>
                  <Space wrap>
                    <Tag color="red">PRODUCTION</Tag>
                    <Tag color="orange">STAGING</Tag>
                    <Tag color="blue">DEVELOPMENT</Tag>
                    <Tag color="green">TEST</Tag>
                  </Space>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>團隊標籤</Title>
                  <Space wrap>
                    <Tag color="purple">PLATFORM</Tag>
                    <Tag color="blue">FRONTEND</Tag>
                    <Tag color="green">BACKEND</Tag>
                    <Tag color="orange">DEVOPS</Tag>
                  </Space>
                </div>
              </Tabs.TabPane>

              <Tabs.TabPane tab="尺寸規格" key="sizes">
                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>標籤尺寸</Title>
                  <Space direction="vertical" size="middle">
                    <div>
                      <Text strong>默認尺寸：</Text>
                      <Tag color="blue" style={{ marginLeft: 8 }}>標準標籤</Tag>
                    </div>
                    <div>
                      <Text strong>小尺寸：</Text>
                      <Tag color="green" size="small" style={{ marginLeft: 8 }}>小標籤</Tag>
                    </div>
                  </Space>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <Title level={5}>交互狀態</Title>
                  <Space direction="vertical" size="middle">
                    <div>
                      <Text strong>可點擊標籤：</Text>
                      <Tag color="blue" style={{ marginLeft: 8, cursor: 'pointer' }} className="clickable">
                        點擊我
                      </Tag>
                    </div>
                    <div>
                      <Text strong>帶數量的標籤：</Text>
                      <Tag color="orange" style={{ marginLeft: 8 }}>告警 (3)</Tag>
                    </div>
                  </Space>
                </div>
              </Tabs.TabPane>
            </Tabs>

            <Divider />

            <div style={{ marginBottom: '16px' }}>
              <Title level={5}>CSS 樣式規範</Title>
              <div style={{
                background: isDarkTheme ? '#0f1419' : '#f6f8fa',
                padding: '16px',
                borderRadius: '8px',
                fontFamily: 'Monaco, Consolas, monospace',
                fontSize: '12px',
                overflow: 'auto'
              }}>
                <pre style={{ margin: 0, color: isDarkTheme ? '#e6e6e6' : '#333' }}>{`/* 統一標籤系統 */
.ant-tag {
  border-radius: 12px !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  padding: 2px 8px !important;
  border: 1px solid transparent !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 2px !important;
  transition: all 0.2s ease !important;
}

/* 嚴重性標籤 */
.ant-tag[color="red"] {
  background: linear-gradient(135deg, rgba(255, 77, 79, 0.15) 0%,
              rgba(255, 77, 79, 0.08) 100%) !important;
  color: #ff4d4f !important;
  border-color: rgba(255, 77, 79, 0.3) !important;
}

.ant-tag[color="orange"] {
  background: linear-gradient(135deg, rgba(250, 173, 20, 0.15) 0%,
              rgba(250, 173, 20, 0.08) 100%) !important;
  color: #faad14 !important;
  border-color: rgba(250, 173, 20, 0.3) !important;
}

/* 可點擊標籤 hover 效果 */
.ant-tag.clickable:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}`}</pre>
              </div>
            </div>

            <div style={{ marginBottom: '16px' }}>
              <Title level={5}>使用指南</Title>
              <div style={{
                background: isDarkTheme ? 'rgba(24, 144, 255, 0.1)' : '#e6f7ff',
                padding: '16px',
                borderRadius: '8px',
                border: `1px solid ${isDarkTheme ? 'rgba(24, 144, 255, 0.3)' : '#91d5ff'}`
              }}>
                <ul style={{ margin: 0, paddingLeft: '20px' }}>
                  <li><strong>嚴重性標籤</strong>：使用 red, orange, blue, green 顏色</li>
                  <li><strong>狀態標籤</strong>：根據實際狀態選擇對應顏色</li>
                  <li><strong>業務標籤</strong>：使用語義化的顏色分類</li>
                  <li><strong>一致性</strong>：所有標籤都使用統一的樣式系統</li>
                  <li><strong>可讀性</strong>：確保在深色和淺色主題下都清晰可見</li>
                </ul>
              </div>
            </div>

            <Text type="secondary" style={{ marginTop: '16px', display: 'block' }}>
              💡 提示：標籤系統已自動應用到所有列表、表格和詳情頁面，無需額外配置
            </Text>
          </div>
        );
      };

      const sections = [
        { key: 'overview', title: '📋 總覽', component: OverviewDemo },
        { key: 'page-structure', title: '🏗️ 頁面結構', component: PageStructureDemo },
        { key: 'buttons', title: '🔘 按鈕系統', component: ButtonSystemDemo },
        { key: 'tables', title: '📊 表格組件', component: TableDemo },
        { key: 'incident-table', title: '🚨 事件列表表格', component: IncidentTableDemo },
        { key: 'forms', title: '📝 表單設計', component: FormDemo },
        { key: 'tags', title: '🏷️ 標籤系統', component: TagSystemDemo },
      ];

      return (
        <ConfigProvider theme={themeConfig}>
          <div className={isDarkTheme ? 'dark-theme' : ''}>
            {/* 頁面頭部 */}
            <div className="guide-header">
              <h1>🎨 SRE 平台設計指南</h1>
              <p>Design Guide for SRE Platform - 互動式開發參考手冊</p>
              <div style={{ marginTop: '20px' }}>
                <Space>
                  <Button
                    type={isDarkTheme ? 'primary' : 'default'}
                    onClick={() => setIsDarkTheme(true)}
                  >
                    🌙 深色主題
                  </Button>
                  <Button
                    type={!isDarkTheme ? 'primary' : 'default'}
                    onClick={() => setIsDarkTheme(false)}
                  >
                    ☀️ 淺色主題
                  </Button>
                </Space>
              </div>
              <p style={{ fontSize: '14px', opacity: 0.9, marginTop: '10px' }}>
                基於 Ant Design 5.x + 自訂深色主題 | 更新日期: 2025-01-15
              </p>
            </div>

            {/* 導航標籤頁 */}
            <Tabs
              activeKey={activeSection}
              onChange={setActiveSection}
              style={{ margin: '0 20px' }}
              items={sections.map(section => ({
                key: section.key,
                label: section.title,
                children: (
                  <div className="guide-section" style={{ margin: '20px 0' }}>
                    {React.createElement(section.component)}
                  </div>
                )
              }))}
            />

            {/* 頁尾 */}
            <div style={{ textAlign: 'center', margin: '40px 20px 20px', padding: '20px', borderTop: '1px solid rgba(255,255,255,0.1)', color: isDarkTheme ? 'rgba(255,255,255,0.6)' : '#666' }}>
              <p>SRE 平台設計指南 | 版本 1.0 | 更新日期: 2025-01-15</p>
              <p>開發者可以直接複製這些組件代碼到項目中使用</p>
            </div>
          </div>
        </ConfigProvider>
      );
    };

    // 渲染應用
    ReactDOM.render(<DesignGuide />, document.getElementById('guide-root'));
  </script>
</body>

</html>