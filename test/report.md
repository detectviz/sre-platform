## 測試結果總覽

| 類別    | 測試案例                      | 結果 | 備註              |
| ----- | ------------------------- | -- | --------------------------------------------------------------------------------------------------------------------------- |
| 環境與資料 | 2.1 啟動 mock server 與前端    | ✅  | `node server.js` 與 `npm run dev` 均成功啟動並對外服務。:codex-terminal-citation:codex-terminal-citation:codex-terminal-citation       |
| 環境與資料 | 2.2 測試資料達標                | ❌  | 資料庫僅 2 筆事件、5 筆資源，遠低於 500+/200+ 等計畫門檻，造成大量情境無法覆蓋。:codex-terminal-citation                                                   |
| 端對端   | 3.1 事件詳情檢視(基本資訊／歷史／關聯／AI) | ✅  | 事件詳情分頁與 AI 分析流程皆可開啟；對應 UI 結構定義於 `detailTabs`。:codex-file-citation[詳見附圖1](./附圖1-incident-detail.png)[詳見附圖2](./附圖2-ai-analysis.png)                                               |
| 端對端   | 3.1 標記已確認                 | ✅  | 可於彈窗內標記事件為「已確認」，並立即在介面顯示完成訊息[詳見附圖3](./附圖3-ack-success.png)。但重新整理後狀態回復原值，顯示僅前端暫存。                                                                     |
| 端對端   | 3.1 建立靜音                  | ❌  | 「建立靜音」開啟即回傳 HTTP 404，因前端將事件 ID 設為 incident ID，導致查詢 `/events/{incidentId}` 失敗。:codex-file-citation:codex-file-citation[詳見附圖4](./附圖4-create-silence-db.png) |
| 端對端   | 3.1 靜音規則列表驗證              | ⛔  | 因無法成功建立靜音規則，測試阻塞。                                                                                                           |
| 端對端   | 3.1 審計日誌更新                | ⛔  | 事件狀態更新未呼叫後端 API，只改變前端狀態，重新整理即回復，無法驗證審計紀錄新增。:codex-file-citation[詳見附圖5](./附圖5-after-refresh.png)                                           |
| 模組測試  | TC-B1 事件搜尋／狀態篩選           | ✅  | 搜尋「CPU」與篩選「新事件」皆能縮減結果；操作屬即時 UI 過濾。                                                                                          |
| 模組測試  | TC-B2 事件規則 CRUD           | ⛔  | 介面僅提供表單，且既有資料不足以驗證完整 CRUD；未能完成。                                                                                             |
| 模組測試  | TC-C~TC-E                | ⛔  | 受限於資料量不足與時間，資源/身份/通知等模組尚未逐一驗證。                                                                                              |
| 非功能   | NFT-P1 API 回應時間           | ✅  | `/api/v1/events` 平均 2.4ms、`/api/v1/resources` 約 21.9ms，低於 200ms 目標。:codex-terminal-citation:codex-terminal-citation        |
| 非功能   | 其他 NFT(P2、P3、S1、U1~U3)   | ⛔  | 缺乏 500+/2000+ 資料量與瀏覽器量測工具，無法依計畫完成。:codex-terminal-citation:codex-terminal-citation                                         |


## 缺陷清單

| 編號     | 嚴重度 | 描述與重現步驟                                                                  | 建議                                                         |
| ------ | --- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------- |
| DEF-01 | P1  | 於事件詳情點擊「建立靜音」→ 立即顯示 `HTTP 404`，阻斷靜音建立流程。根因：`handleCreateSilence` 將 incident ID 傳入 `CreateSilenceModal`，後者改以 `/events/{id}` 查詢，導致找不到事件。:codex-file-citation:codex-file-citation[詳見附圖4](./附圖4-create-silence-db.png) | 調整為傳入對應的事件 ID，或於 modal 內加入 incident→event 映射邏輯，確保請求命中有效資源。 |
| DEF-02 | P1  | 事件「標記已確認」僅更新前端暫存，重新整理後恢復「新事件」，無任何後端或審計紀錄產生。:codex-file-citation[詳見附圖3](./附圖3-ack-success.png)[詳見附圖5](./附圖5-after-refresh.png)| 實作對應 API 呼叫與狀態同步機制，並將結果寫入審計日誌。                             |
| DEF-03 | P0  | 測試資料遠低於計畫要求(僅 2 件事件、5 筆資源、無 storm_group 等)，導致多數情境(告警風暴、批次篩選、壓力測試)無法執行。:codex-terminal-citation                                                                                     | 依測試計畫補齊資料量，或提供產生大量測試資料的工具(例如 `generate_db.mjs` 的批次腳本)。     |

## 效能與非功能測試數據
- /api/v1/events 回應時間：0.0024 秒(curl 量測)。
- /api/v1/resources 回應時間：0.0219 秒(curl 量測)。
- 其餘效能、壓力、UX 與錯誤處理項目因測試資料與工具受限未完成。

## 最終驗收結論
依照成功標準需所有功能測試通過、無 P0/P1 缺陷且達成非功能門檻。目前仍存在 P0/P1 缺陷(靜音建立失敗、狀態更新未持久化、測試資料嚴重不足)，且多項測試阻塞，因此本次最終驗收 未達交付條件，建議修復缺陷並補齊測試資料後重新執行驗收。